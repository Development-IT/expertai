template_strategy = { #disable template upgrading, force it to upgrade paratrooper to fix an issue
	enable = { always = yes }
	abort = { always = no }
	
	ai_strategy = { type = template_prio id = light_armor 			value = -100000	}
	ai_strategy = { type = template_prio id = medium_armor 			value = -100000	}
	ai_strategy = { type = template_prio id = heavy_armor 			value = -100000	}
	ai_strategy = { type = template_prio id = modern_armor 			value = -100000	}
	
	ai_strategy = { type = template_prio id = infantry	 			value = -100000	}
	ai_strategy = { type = template_prio id = motorized 			value = -100000	}
	ai_strategy = { type = template_prio id = cavalry 				value = -100000	}
	
	ai_strategy = { type = template_prio id = mountaineers 			value = -100000	}
	ai_strategy = { type = template_prio id = marine 				value = -100000	}
	ai_strategy = { type = template_prio id = paratrooper 			value = -100000	}
	
	ai_strategy = { type = template_prio id = anti_tank_brigade 	value = -100000	}
}

template_strategy_1 = { #first upgrade
	enable = { has_country_flag = templates_loaded }
	abort = { always = no }
	
	ai_strategy = { type = template_prio id = motorized 			value = 200000	}
}

template_strategy_2 = { #second upgrade
	enable = { has_country_flag = at_loaded }
	abort = { always = no }
	
	ai_strategy = { type = template_prio id = paratrooper 			value = 200000	}
}

############### occupation policy

occupation_strategy = {
	enable = { OR = { has_government = fascism has_government = communism } }
	abort = { always = no }
	
	#majors
	ai_strategy = { type = occupation_policy id = "ENG" value = 3 }
	ai_strategy = { type = occupation_policy id = "FRA" value = 3 }
	ai_strategy = { type = occupation_policy id = "USA" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "GER" value = 3 }
	ai_strategy = { type = occupation_policy id = "ITA" value = 3 }
	ai_strategy = { type = occupation_policy id = "JAP" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "SOV" value = 3 }
	
	#minors 
	ai_strategy = { type = occupation_policy id = "HOL" value = 3 }
	ai_strategy = { type = occupation_policy id = "BEL" value = 3 }
	ai_strategy = { type = occupation_policy id = "LUX" value = 3 }
	ai_strategy = { type = occupation_policy id = "SWI" value = 3 }
	ai_strategy = { type = occupation_policy id = "POL" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "DEN" value = 3 }
	ai_strategy = { type = occupation_policy id = "NOR" value = 3 }
	ai_strategy = { type = occupation_policy id = "SWE" value = 3 }
	ai_strategy = { type = occupation_policy id = "FIN" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "HUN" value = 3 }
	ai_strategy = { type = occupation_policy id = "ROM" value = 3 }
	ai_strategy = { type = occupation_policy id = "BUL" value = 3 }
	ai_strategy = { type = occupation_policy id = "YUG" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "CZE" value = 3 }
	ai_strategy = { type = occupation_policy id = "GRE" value = 3 }
	ai_strategy = { type = occupation_policy id = "TUR" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "SPR" value = 3 }
	ai_strategy = { type = occupation_policy id = "POR" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "RAJ" value = 3 }
	ai_strategy = { type = occupation_policy id = "CAN" value = 3 }
	ai_strategy = { type = occupation_policy id = "AST" value = 3 }
	ai_strategy = { type = occupation_policy id = "NZL" value = 3 }
	ai_strategy = { type = occupation_policy id = "MAL" value = 3 }
	ai_strategy = { type = occupation_policy id = "SAF" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "CHI" value = 3 }
	ai_strategy = { type = occupation_policy id = "SIA" value = 3 }
	ai_strategy = { type = occupation_policy id = "MAN" value = 3 }
	ai_strategy = { type = occupation_policy id = "MEN" value = 3 }
	ai_strategy = { type = occupation_policy id = "INS" value = 3 }
	
	ai_strategy = { type = occupation_policy id = "D01" value = 3 }
	ai_strategy = { type = occupation_policy id = "D02" value = 3 }
	ai_strategy = { type = occupation_policy id = "D03" value = 3 }
	ai_strategy = { type = occupation_policy id = "D04" value = 3 }
	ai_strategy = { type = occupation_policy id = "D05" value = 3 }
}

###############

default_area_priority = {
	enable = {
		NOT = { original_tag = ENG original_tag = FRA original_tag = USA original_tag = GER original_tag = ITA original_tag = JAP original_tag = SOV original_tag = RAJ }
	}
	ai_strategy = {
		type = area_priority
		id = europe
		value = 100
	}
	ai_strategy = {
		type = area_priority
		id = north_america
		value = 100
	}
	ai_strategy = {
		type = area_priority
		id = south_america
		value = 50
	}
	ai_strategy = {
		type = area_priority
		id = asia
		value = 75
	}
	ai_strategy = {
		type = area_priority
		id = middle_east
		value = 50
	}
	ai_strategy = {
		type = area_priority
		id = africa
		value = -25
	}
	ai_strategy = {
		type = area_priority
		id = pacific
		value = 300
	}
	ai_strategy = {
		type = area_priority
		id = oceania
		value = 80
	}
}

############ these should in theory make the AI highly prioritise their homeland - doesnt quite work

GER_area_priorities = {
	enable = {
		original_tag = GER
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = 100 }
	ai_strategy = { type = area_priority id = north_america 	value = 50 }
	ai_strategy = { type = area_priority id = south_america 	value = 25 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = 25 }
	ai_strategy = { type = area_priority id = africa 			value = -25 }
	
	ai_strategy = { type = area_priority id = asia 				value = 100 }
	ai_strategy = { type = area_priority id = pacific 			value = 1 }
	ai_strategy = { type = area_priority id = oceania 			value = 1 }
}

ITA_area_priorities = {
	enable = {
		original_tag = ITA
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = 100 }
	ai_strategy = { type = area_priority id = north_america 	value = 50 }
	ai_strategy = { type = area_priority id = south_america 	value = 25 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -50 }
	ai_strategy = { type = area_priority id = africa 			value = -50 }
	
	ai_strategy = { type = area_priority id = asia 				value = 1 }
	ai_strategy = { type = area_priority id = pacific 			value = 1 }
	ai_strategy = { type = area_priority id = oceania 			value = 1 }
}

ITA_protect_core = {
	enable = {
		original_tag = ITA
		is_historical_focus_on = yes
		
		surrender_progress > 0.20
		NOT = { has_capitulated = yes }
		any_owned_state = { OR = { region = 21 region = 23 } controller = { has_war_with = ITA } }
	}
	abort = {
		OR = {
			NOT = { surrender_progress > 0.1 }
			has_capitulated = yes
			NOT = { any_owned_state = { OR = { region = 21 region = 23 } controller = { has_war_with = ITA } } }
		}
	}

	ai_strategy = { type = area_priority id = europe 			value = 500 }
	ai_strategy = { type = area_priority id = north_america 	value = -100 }
	ai_strategy = { type = area_priority id = south_america 	value = -100 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -100 }
	ai_strategy = { type = area_priority id = africa 			value = -100 }
	
	ai_strategy = { type = area_priority id = asia 				value = -100 }
	ai_strategy = { type = area_priority id = pacific 			value = -100 }
	ai_strategy = { type = area_priority id = oceania 			value = -100 }
}

JAP_area_priorities = {
	enable = {
		original_tag = JAP
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = 1 }
	ai_strategy = { type = area_priority id = north_america 	value = 50 }
	ai_strategy = { type = area_priority id = south_america 	value = 50 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = 1 }
	ai_strategy = { type = area_priority id = africa 			value = -25 }
	
	ai_strategy = { type = area_priority id = asia 				value = 100 }
	ai_strategy = { type = area_priority id = pacific 			value = 100 }
	ai_strategy = { type = area_priority id = oceania 			value = 100 }
}

JAP_protect_core = {
	enable = {
		original_tag = JAP
		is_historical_focus_on = yes
		
		surrender_progress > 0.20
		NOT = { has_capitulated = yes }
		any_owned_state = { OR = { region = 154 } controller = { has_war_with = JAP } }
	}
	abort = {
		OR = {
			NOT = { surrender_progress > 0.1 }
			has_capitulated = yes
			NOT = { any_owned_state = { OR = { region = 154 } controller = { has_war_with = JAP } } }
		}
	}

	ai_strategy = { type = area_priority id = europe 			value = -100 }
	ai_strategy = { type = area_priority id = north_america 	value = -100 }
	ai_strategy = { type = area_priority id = south_america 	value = -100 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -100 }
	ai_strategy = { type = area_priority id = africa 			value = -100 }
	
	ai_strategy = { type = area_priority id = asia 				value = 500 }
	ai_strategy = { type = area_priority id = pacific 			value = 500 }
	ai_strategy = { type = area_priority id = oceania 			value = 500 }
}

ENG_area_priorities = {
	enable = {
		OR = { 
			original_tag = ENG 
			AND = { original_tag = CAN is_in_faction_with = ENG } 
			AND = { original_tag = SAF is_in_faction_with = ENG } 
		}
	}
	abort = {
		NOT = { is_in_faction_with = ENG }
	}

	ai_strategy = { type = area_priority id = europe 			value = 200 }
	ai_strategy = { type = area_priority id = north_america 	value = 25 }
	ai_strategy = { type = area_priority id = south_america 	value = 25 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -50 }
	ai_strategy = { type = area_priority id = africa 			value = -50 }
	
	ai_strategy = { type = area_priority id = asia 				value = 25 }
	ai_strategy = { type = area_priority id = pacific 			value = 25 }
	ai_strategy = { type = area_priority id = oceania 			value = 25 }
}

ENG_protect_core = {
	enable = {
		original_tag = ENG
		is_historical_focus_on = yes
		
		surrender_progress > 0.1
		NOT = { has_capitulated = yes }
		any_owned_state = { OR = { region = 1 region = 2 region = 3 } NOT = { state = 3 state = 119 } controller = { has_war_with = ENG } }
	}
	abort = {
		OR = {
			NOT = { surrender_progress > 0.05 }
			has_capitulated = yes
			NOT = { any_owned_state = { OR = { region = 1 region = 2 region = 3 } NOT = { state = 3 state = 119 } controller = { has_war_with = ENG } } }
		}
	}

	ai_strategy = { type = area_priority id = europe 			value = 500 }
	ai_strategy = { type = area_priority id = north_america 	value = -100 }
	ai_strategy = { type = area_priority id = south_america 	value = -100 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -100 }
	ai_strategy = { type = area_priority id = africa 			value = -100 }
	
	ai_strategy = { type = area_priority id = asia 				value = -100 }
	ai_strategy = { type = area_priority id = pacific 			value = -100 }
	ai_strategy = { type = area_priority id = oceania 			value = -100 }
}

FRA_area_priorities = {
	enable = {
		original_tag = FRA
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = 100 }
	ai_strategy = { type = area_priority id = north_america 	value = 25 }
	ai_strategy = { type = area_priority id = south_america 	value = 25 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = 25 }
	ai_strategy = { type = area_priority id = africa 			value = -25 }
	
	ai_strategy = { type = area_priority id = asia 				value = 25 }
	ai_strategy = { type = area_priority id = pacific 			value = 25 }
	ai_strategy = { type = area_priority id = oceania 			value = 25 }
}

FRA_protect_core = {
	enable = {
		original_tag = FRA
		is_historical_focus_on = yes
		
		surrender_progress > 0.20
		NOT = { has_capitulated = yes }
		any_owned_state = { OR = { region = 19 region = 20 } controller = { has_war_with = FRA } }
	}
	abort = {
		OR = {
			NOT = { surrender_progress > 0.1 }
			has_capitulated = yes
			NOT = { any_owned_state = { OR = { region = 19 region = 20 } controller = { has_war_with = FRA } } }
		}
	}

	ai_strategy = { type = area_priority id = europe 			value = 500 }
	ai_strategy = { type = area_priority id = north_america 	value = -100 }
	ai_strategy = { type = area_priority id = south_america 	value = -100 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -100 }
	ai_strategy = { type = area_priority id = africa 			value = -100 }
	
	ai_strategy = { type = area_priority id = asia 				value = -100 }
	ai_strategy = { type = area_priority id = pacific 			value = -100 }
	ai_strategy = { type = area_priority id = oceania 			value = -100 }
}

USA_area_priorities = {
	enable = {
		original_tag = USA
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = 200 }
	ai_strategy = { type = area_priority id = north_america 	value = 25 }
	ai_strategy = { type = area_priority id = south_america 	value = 25 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = 1 }
	ai_strategy = { type = area_priority id = africa 			value = 50 }
	
	ai_strategy = { type = area_priority id = asia 				value = 50 }
	ai_strategy = { type = area_priority id = pacific 			value = 50 }
	ai_strategy = { type = area_priority id = oceania 			value = 50 }
}

USA_protect_core = {
	enable = {
		original_tag = USA
		is_historical_focus_on = yes
		
		surrender_progress > 0.20
		NOT = { has_capitulated = yes }
		any_owned_state = { OR = { region = 117 region = 120 region = 119 region = 118 } controller = { has_war_with = USA } }
	}
	abort = {
		OR = {
			NOT = { surrender_progress > 0.1 }
			has_capitulated = yes
			NOT = { any_owned_state = { OR = { region = 117 region = 120 region = 119 region = 118 } controller = { has_war_with = USA } } }
		}
	}

	ai_strategy = { type = area_priority id = europe 			value = -100 }
	ai_strategy = { type = area_priority id = north_america 	value = 500 }
	ai_strategy = { type = area_priority id = south_america 	value = -100 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -100 }
	ai_strategy = { type = area_priority id = africa 			value = -100 }
	
	ai_strategy = { type = area_priority id = asia 				value = -100 }
	ai_strategy = { type = area_priority id = pacific 			value = -100 }
	ai_strategy = { type = area_priority id = oceania 			value = -100 }
}

SOV_area_priorities = {
	enable = {
		original_tag = SOV
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = 100 }
	ai_strategy = { type = area_priority id = north_america 	value = 25 }
	ai_strategy = { type = area_priority id = south_america 	value = 25 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = 50 }
	ai_strategy = { type = area_priority id = africa 			value = -25 }
	
	ai_strategy = { type = area_priority id = asia 				value = 100 }
	ai_strategy = { type = area_priority id = pacific 			value = 1 }
	ai_strategy = { type = area_priority id = oceania 			value = 1 }
}

RAJ_area_priorities = { #RAJ should keep its forces in asia
	enable = {
		original_tag = RAJ
	}
	abort = {
		always = no
	}

	ai_strategy = { type = area_priority id = europe 			value = -99 }
	ai_strategy = { type = area_priority id = north_america 	value = -99 }
	ai_strategy = { type = area_priority id = south_america 	value = -99 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -99 }
	ai_strategy = { type = area_priority id = africa 			value = -99 }
	
	ai_strategy = { type = area_priority id = asia 				value = 100 }
	ai_strategy = { type = area_priority id = pacific 			value = -99 }
	ai_strategy = { type = area_priority id = oceania 			value = -99 }
}

RAJ_protect_core = {
	enable = {
		original_tag = RAJ
		is_historical_focus_on = yes
		
		surrender_progress > 0.20
		NOT = { has_capitulated = yes }
	}
	abort = {
		OR = {
			NOT = { surrender_progress > 0.1 }
			has_capitulated = yes
		}
	}

	ai_strategy = { type = area_priority id = europe 			value = -1 }
	ai_strategy = { type = area_priority id = north_america 	value = -1 }
	ai_strategy = { type = area_priority id = south_america 	value = -1 }
	
	ai_strategy = { type = area_priority id = middle_east 		value = -1 }
	ai_strategy = { type = area_priority id = africa 			value = -1 }
	
	ai_strategy = { type = area_priority id = asia 				value = 100 }
	ai_strategy = { type = area_priority id = pacific 			value = -1 }
	ai_strategy = { type = area_priority id = oceania 			value = -1 }
}

################

volunteers_axis_scw = { 
	enable = {
		is_major = yes
		has_government = fascism
		is_historical_focus_on = yes
		
		has_global_flag = spanish_civil_war
	}
	abort = {
		has_global_flag = scw_over
	}
	
	ai_strategy = { type = antagonize id = "SPR" value = 1000 }
}

volunteers_com_scw = { 
	enable = {
		is_major = yes
		has_government = communism
		is_historical_focus_on = yes
		
		has_global_flag = spanish_civil_war
	}
	abort = {
		has_global_flag = scw_over
	}
	
	ai_strategy = { type = antagonize id = "D01" value = 1000 }
}

volunteers_axis_china = { 
	enable = {
		is_major = yes
		has_government = fascism
		is_historical_focus_on = yes
		
		JAP = { has_war_with = CHI }
	}
	abort = {
		NOT = { JAP = { has_war_with = CHI } }
	}
	
	ai_strategy = { type = antagonize id = "CHI" value = 1000 }
}

volunteers_com_china = { 
	enable = {
		is_major = yes
		has_government = communism
		is_historical_focus_on = yes
		
		JAP = { has_war_with = CHI }
	}
	abort = {
		NOT = { JAP = { has_war_with = CHI } }
	}
	
	ai_strategy = { type = antagonize id = "JAP" value = 1000 }
}

################

allied_invasions_0 = { #disable invasions
	enable = {
		is_historical_focus_on = yes
		is_in_faction_with = ENG
	}
	abort = {
		always = no
	}
	
	ai_strategy = { type = invade id = "GER" value = -2000 }
	ai_strategy = { type = invade id = "ITA" value = -2000 }
	ai_strategy = { type = invade id = "ROM" value = -2000 }
	ai_strategy = { type = invade id = "BUL" value = -2000 }
	ai_strategy = { type = invade id = "FIN" value = -2000 }
	ai_strategy = { type = invade id = "D02" value = -2000 }
	ai_strategy = { type = invade id = "YUG" value = -2000 }
	ai_strategy = { type = invade id = "GRE" value = -2000 }
	
	ai_strategy = { type = invade id = "JAP" value = -2000 }
	ai_strategy = { type = invade id = "MAN" value = -2000 }
	ai_strategy = { type = invade id = "SIA" value = -2000 }
}
	
allied_invasions_ita = { #ita invasions
	enable = {
		is_historical_focus_on = yes
		is_in_faction_with = ENG
		has_war_with = ITA
		has_army_manpower = { size > 600000 } #minors dont bother
		
		OR = { 
			FRA = { has_capitulated = yes }
			FRA = { exists = no }
			FRA = { is_puppet = yes }
			FRA = { is_in_faction_with = GER }
			FRA = { has_government = fascism }
			NOT = { is_in_faction_with = FRA }
		}

		OR = {
			ITA = { is_ai = no alliance_strength_ratio < 0.75 } #dont invade early without the strength to do so
		
			date > 1943.1.1 	#dont wait longer than this
			ITA = { surrender_progress > 0.2 }
			AND = { ITA = { has_war_with = SOV } SOV = { surrender_progress > 0.15 } }	#SOV getting stomped, rush invasion
			SOV = { has_capitulated = yes }
			SOV = { exists = no }
			SOV = { is_puppet = yes }
			ITA = { is_in_faction_with = SOV }
		}
	}
	abort = {
		OR = {
			NOT = { has_army_manpower = { size > 600000 } }
			NOT = {
				ITA = { is_ai = no alliance_strength_ratio < 0.75 }
			
				date > 1943.1.1
				ITA = { surrender_progress > 0.2 }
				AND = { ITA = { has_war_with = SOV } SOV = { surrender_progress > 0.15 } }
				SOV = { has_capitulated = yes }
				SOV = { exists = no }
				SOV = { is_puppet = yes }
				ITA = { is_in_faction_with = SOV }
			}
		}
	}

	ai_strategy = { type = invade id = "ITA" value = 4000 }
	ai_strategy = { type = invade id = "D02" value = 4000 }
}

allied_invasions_ger = { #GER invasions
	enable = {
		is_historical_focus_on = yes
		is_in_faction_with = ENG
		has_war_with = GER
		has_army_manpower = { size > 600000 } #minors dont bother
		OR = {
			NOT = { tag = USA } #focus on the pacific, let UK create plans in europe
			AND = { tag = USA OR = { date > 1948.1.1 ENG = { has_capitulated = yes } } }
			
			ENG = { has_capitulated = yes } #ignore if ENG capitulates
		}
		
		OR = {
			FRA = { has_capitulated = yes }
			FRA = { exists = no }
			FRA = { is_puppet = yes }
			FRA = { has_government = fascism }
			GER = { is_in_faction_with = FRA }
			NOT = { is_in_faction_with = FRA }
		}

		OR = {
			GER = { is_ai = no alliance_strength_ratio < 0.5 } #dont invade early without the strength to do so
			
			date > 1944.1.1
			GER = { surrender_progress > 0.2 }
			AND = { GER = { has_war_with = SOV } SOV = { surrender_progress > 0.15 } }
			SOV = { has_capitulated = yes }
			SOV = { exists = no }
			SOV = { is_puppet = yes }
			GER = { is_in_faction_with = SOV }
			
			ENG = { has_capitulated = yes } #ignore if ENG capitulates
		}
	}
	abort = {
		OR = {
			NOT = { has_army_manpower = { size > 600000 } }
			NOT = {
				ENG = { has_capitulated = yes }
				GER = { is_ai = no alliance_strength_ratio < 0.5 } #dont invade early without the strength to do so
			
				date > 1944.1.1
				GER = { surrender_progress > 0.2 }
				AND = { GER = { has_war_with = SOV } SOV = { surrender_progress > 0.15 } }
				SOV = { has_capitulated = yes }
				SOV = { exists = no }
				SOV = { is_puppet = yes }
				GER = { is_in_faction_with = SOV }
			}
		}
	}

	ai_strategy = { type = invade id = "GER" value = 4000 }
}

allied_invasions_jap = { #jap invasions
	enable = {
		is_historical_focus_on = yes
		is_in_faction_with = ENG
		OR = {
			tag = USA
			date > 1944.1.1
		}
	}
	abort = {
		NOT = {
			tag = USA
			date > 1944.1.1
		}
	}

	ai_strategy = { type = invade id = "JAP" value = 4000 }
}

usa_invasions = {
	enable = {
		is_historical_focus_on = yes
		tag = USA
	}
	abort = {
		always = no
	}

	ai_strategy = { type = invade id = "JAP" value = 2000 }
}

ger_invasions_0 = { #stop confusing the AI with naval invasion orders
	enable = {
		is_historical_focus_on = yes
		is_in_faction_with = GER
		SOV = { has_capitulated = no }
	}
	abort = {
		SOV = { has_capitulated = yes }
	}

	ai_strategy = { type = invade id = "SOV" value = -2000 }
}

ger_invasions_1 = {
	enable = {
		is_historical_focus_on = yes
		tag = GER
		has_completed_focus = GER_weserubung
	}
	abort = {
		NOR = { has_capitulated = yes }
	}

	ai_strategy = { type = invade id = "NOR" value = 2000 }
}

ger_invasions_2 = {
	enable = {
		is_historical_focus_on = yes
		is_in_faction_with = GER
		NOR = { has_capitulated = yes }
		
		#OR = {
		#	NOT = { any_state = { OR = { region = 1 region = 2 region = 3 } controller = { is_in_faction_with = GER } } } 
		#	ENG = { has_capitulated = yes }
		#}
		
		OR = {
			FRA = { has_capitulated = yes }
			FRA = { exists = no }
			FRA = { is_puppet = yes }
			FRA = { has_government = fascism }
			is_in_faction_with = FRA
		}
		
		NOT = { has_war_with = SOV }
	}
	abort = {
		OR = {
			#AND = {
			#	any_state = { OR = { region = 1 region = 2 region = 3 } controller = { is_in_faction_with = GER } } #stick with one landing
			#	ENG = { has_capitulated = no } #but keep invading colonies after UK has fallen
			#}
			has_war_with = SOV
		}
	}

	ai_strategy = { type = invade id = "ENG" value = 2000 }
}

sov_invasions_0 = { #disable invasions
	enable = {
		is_historical_focus_on = yes
		tag = SOV
		GER = { has_capitulated = no }
	}
	abort = {
		GER = { has_capitulated = yes }
	}
	
	ai_strategy = { type = invade id = "GER" value = -2000 }
	ai_strategy = { type = invade id = "ITA" value = -2000 }
	ai_strategy = { type = invade id = "ROM" value = -2000 }
	ai_strategy = { type = invade id = "BUL" value = -2000 }
	ai_strategy = { type = invade id = "FIN" value = -2000 }
	ai_strategy = { type = invade id = "D02" value = -2000 }
	ai_strategy = { type = invade id = "YUG" value = -2000 }
	ai_strategy = { type = invade id = "GRE" value = -2000 }
}

################################################################

#japanese pacific campaign
jap_invasions_0 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = INS } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "INS" value = -2000 }
}
jap_invasions_1 = {
	enable = { is_historical_focus_on = yes OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = MAL } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "MAL" value = -2000 }
}
jap_invasions_2 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = "PHI" } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "PHI" value = -2000 }
}
jap_invasions_3 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = AST } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "AST" value = -2000 }
}
jap_invasions_4 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = RAJ } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "RAJ" value = -2000 }
}
jap_invasions_6 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = NZL } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "NZL" value = -2000 }
}
jap_invasions_7 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "ENG" value = -2000 }
}
jap_invasions_8 = {
	enable = { is_historical_focus_on = yes tag = JAP OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG has_war_with = FRA } } }
	abort = { always = no }
	ai_strategy = { type = invade id = "FRA" value = -2000 }
}
#take the rubber islands first
jap_invasions_rubber = {
	enable = {
		is_historical_focus_on = yes
		tag = JAP
		OR = { focus_progress = { focus = southern_expansion_focus progress > 0 } AND = { has_war_with = ENG } }
		
		any_state = { OR = { region = 159 state = 672 state = 336 } controller = { has_war_with = JAP } }
	}
	abort = {
		always = no
	}
	
	ai_strategy = { type = invade id = "INS" value = 4000 }
	ai_strategy = { type = invade id = "MAL" value = 4000 }
}
#invade nzl ast raj after
jap_invasions_cw = {
	enable = {
		is_historical_focus_on = yes
		tag = JAP
		has_war_with = ENG

		NOT = { any_state = { OR = { region = 159 state = 672 state = 336 } controller = { has_war_with = JAP } } }
	}
	abort = {
		any_state = { OR = { region = 159 state = 672 state = 336 } controller = { has_war_with = JAP } }
	}
	
	ai_strategy = { type = invade id = "NZL" value = 4000 }
	ai_strategy = { type = invade id = "AST" value = 4000 }
	ai_strategy = { type = invade id = "RAJ" value = 4000 }
}
#invade phi usa
jap_invasions_usa = {
	enable = {
		is_historical_focus_on = yes
		tag = JAP
		has_war_with = USA
	}
	abort = {
		always = no
	}
	
	ai_strategy = { type = invade id = "PHI" value = 4000 }
	ai_strategy = { type = invade id = "USA" value = 4000 }
}

################

#make sure that finland/baltics dont join a faction
dont_join_faction_fin = {
	enable = {
		OR = { is_in_faction_with = ENG is_in_faction_with = GER }
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = FIN }
			SOV = { has_wargoal_against = FIN }
			SOV = { has_war_with = FIN }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = FIN }
			SOV = { has_wargoal_against = FIN }
			SOV = { has_war_with = FIN }
		}
	}
	
	ai_strategy = { type = alliance id = "FIN" value = -135 }
	ai_strategy = { type = befriend id = "FIN" value = -500 }
	ai_strategy = { type = antagonize id = "FIN" value = 500 }
	ai_strategy = { type = ignore id = "FIN" value = 500 }
}

dont_join_faction_fin_2 = {
	enable = {
		tag = FIN
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = FIN }
			SOV = { has_wargoal_against = FIN }
			SOV = { has_war_with = FIN }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = FIN }
			SOV = { has_wargoal_against = FIN }
			SOV = { has_war_with = FIN }
		}
	}
	
	ai_strategy = { type = alliance id = "ENG" value = -135 }
	ai_strategy = { type = antagonize id = "ENG" value = 135 }
	ai_strategy = { type = ignore id = "ENG" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = -135 }
	ai_strategy = { type = antagonize id = "GER" value = 135 }
	ai_strategy = { type = ignore id = "GER" value = 500 }
}

continuation_war = {
	enable = {
		OR = { tag = FIN tag = GER }
		is_historical_focus_on = yes
		
		FIN = { has_war = no }
		NOT = { 146 = { is_controlled_by = FIN } }
		
		OR = {
			GER = { focus_progress = { focus = GER_ussr_war_goal progress > 0.5 } }
			GER = { has_war_with = SOV }
		}
		OR = { #dont join if norway hasnt falled - otherwise finland will throw its entire army against norway
			NOR = { has_capitulated = yes }
			NOR = { exists = no }
			NOR = { is_puppet = yes }
			NOR = { has_government = fascism }
			is_in_faction_with = NOR
			has_war_with = NOR
		}
	}
	abort = {
		always = no
	}
	
	ai_strategy = { type = alliance id = "GER" value = 500 }
	ai_strategy = { type = antagonize id = "GER" value = -135 }
	ai_strategy = { type = ignore id = "GER" value = -500 }
	
	ai_strategy = { type = alliance id = "FIN" value = 500 }
	ai_strategy = { type = antagonize id = "FIN" value = -135 }
	ai_strategy = { type = ignore id = "FIN" value = -500 }
}

dont_join_faction_est = {
	enable = {
		OR = { is_in_faction_with = ENG is_in_faction_with = GER }
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = EST }
			SOV = { has_wargoal_against = EST }
			SOV = { has_war_with = EST }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = EST }
			SOV = { has_wargoal_against = EST }
			SOV = { has_war_with = EST }
		}
	}
	
	ai_strategy = { type = alliance id = "EST" value = -135 }
	ai_strategy = { type = befriend id = "EST" value = -500 }
	ai_strategy = { type = antagonize id = "EST" value = 500 }
	ai_strategy = { type = ignore id = "EST" value = 500 }
}

dont_join_faction_est_2 = {
	enable = {
		tag = EST
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = EST }
			SOV = { has_wargoal_against = EST }
			SOV = { has_war_with = EST }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = EST }
			SOV = { has_wargoal_against = EST }
			SOV = { has_war_with = EST }
		}
	}
	
	ai_strategy = { type = alliance id = "ENG" value = -135 }
	ai_strategy = { type = antagonize id = "ENG" value = 135 }
	ai_strategy = { type = ignore id = "ENG" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = -135 }
	ai_strategy = { type = antagonize id = "GER" value = 135 }
	ai_strategy = { type = ignore id = "GER" value = 500 }
}

dont_join_faction_lat = {
	enable = {
		OR = { is_in_faction_with = ENG is_in_faction_with = GER }
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = LAT }
			SOV = { has_wargoal_against = LAT }
			SOV = { has_war_with = LAT }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = LAT }
			SOV = { has_wargoal_against = LAT }
			SOV = { has_war_with = LAT }
		}
	}
	
	ai_strategy = { type = alliance id = "LAT" value = -135 }
	ai_strategy = { type = befriend id = "LAT" value = -500 }
	ai_strategy = { type = antagonize id = "LAT" value = 500 }
	ai_strategy = { type = ignore id = "LAT" value = 500 }
}

dont_join_faction_lat_2 = {
	enable = {
		tag = LAT
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = LAT }
			SOV = { has_wargoal_against = LAT }
			SOV = { has_war_with = LAT }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = LAT }
			SOV = { has_wargoal_against = LAT }
			SOV = { has_war_with = LAT }
		}
	}
	
	ai_strategy = { type = alliance id = "ENG" value = -135 }
	ai_strategy = { type = antagonize id = "ENG" value = 135 }
	ai_strategy = { type = ignore id = "ENG" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = -135 }
	ai_strategy = { type = antagonize id = "GER" value = 135 }
	ai_strategy = { type = ignore id = "GER" value = 500 }
}

dont_join_faction_lit = {
	enable = {
		OR = { is_in_faction_with = ENG is_in_faction_with = GER }
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = LIT }
			SOV = { has_wargoal_against = LIT }
			SOV = { has_war_with = LIT }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = LIT }
			SOV = { has_wargoal_against = LIT }
			SOV = { has_war_with = LIT }
		}
	}
	
	ai_strategy = { type = alliance id = "LIT" value = -135 }
	ai_strategy = { type = befriend id = "LIT" value = -500 }
	ai_strategy = { type = antagonize id = "LIT" value = 500 }
	ai_strategy = { type = ignore id = "LIT" value = 500 }
}

dont_join_faction_lit_2 = {
	enable = {
		tag = LIT
		is_historical_focus_on = yes
		
		OR = {
			SOV = { is_justifying_wargoal_against = LIT }
			SOV = { has_wargoal_against = LIT }
			SOV = { has_war_with = LIT }
		}
	}
	abort = {
		NOT = {
			SOV = { is_justifying_wargoal_against = LIT }
			SOV = { has_wargoal_against = LIT }
			SOV = { has_war_with = LIT }
		}
	}
	
	ai_strategy = { type = alliance id = "ENG" value = -135 }
	ai_strategy = { type = antagonize id = "ENG" value = 135 }
	ai_strategy = { type = ignore id = "ENG" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = -135 }
	ai_strategy = { type = antagonize id = "GER" value = 135 }
	ai_strategy = { type = ignore id = "GER" value = 500 }
}

#neutral low countries
dont_join_faction_bnl_0 = {
	enable = {
		OR = { tag = BEL tag = HOL tag = LUX tag = ENG }
		is_historical_focus_on = yes
	}
	abort = {
		always = no
	}
	
	ai_strategy = { type = alliance id = "ENG" value = -135 }
	ai_strategy = { type = antagonize id = "ENG" value = 135 }
	ai_strategy = { type = ignore id = "ENG" value = 135 }
	
	ai_strategy = { type = alliance id = "BEL" value = -135 }
	ai_strategy = { type = antagonize id = "BEL" value = 135 }
	ai_strategy = { type = ignore id = "BEL" value = 135 }
	
	ai_strategy = { type = alliance id = "HOL" value = -135 }
	ai_strategy = { type = antagonize id = "HOL" value = 135 }
	ai_strategy = { type = ignore id = "HOL" value = 135 }
	
	ai_strategy = { type = alliance id = "LUX" value = -135 }
	ai_strategy = { type = antagonize id = "LUX" value = 135 }
	ai_strategy = { type = ignore id = "LUX" value = 135 }
}
dont_join_faction_bnl = {
	enable = {
		OR = { tag = BEL tag = HOL tag = LUX }
		is_historical_focus_on = yes
		
		has_war = yes
	}
	abort = {
		always = no
	}
	
	ai_strategy = { type = alliance id = "ENG" value = 135 }
	ai_strategy = { type = antagonize id = "ENG" value = -135 }
	ai_strategy = { type = ignore id = "ENG" value = -135 }
	
	ai_strategy = { type = alliance id = "BEL" value = 135 }
	ai_strategy = { type = antagonize id = "BEL" value = -135 }
	ai_strategy = { type = ignore id = "BEL" value = -135 }
	
	ai_strategy = { type = alliance id = "HOL" value = 135 }
	ai_strategy = { type = antagonize id = "HOL" value = -135 }
	ai_strategy = { type = ignore id = "HOL" value = -135 }
	
	ai_strategy = { type = alliance id = "LUX" value = 135 }
	ai_strategy = { type = antagonize id = "LUX" value = -135 }
	ai_strategy = { type = ignore id = "LUX" value = -135 }
}

#tripartite pact

#romania joins axis
rom_joins_axis_0 = {
	enable = {
		GER = { is_ai = yes }
		OR = { tag = ROM tag = GER }
		is_historical_focus_on = yes
		NOT = { date > 1940.11.20 }
	}
	abort = {
		date > 1940.11.20
	}
	
	ai_strategy = { type = ignore id = "GER" value = 200 }
	ai_strategy = { type = ignore id = "ROM" value = 200 }
	ai_strategy = { type = antagonize id = "GER" value = 200 }
	ai_strategy = { type = antagonize id = "ROM" value = 200 }
}
rom_joins_axis = {
	enable = {
		GER = { is_ai = yes }
		OR = {
			AND = {
				tag = ROM
				any_neighbor_country = { is_in_faction_with = GER }
			}
			tag = GER
		}
		
		is_historical_focus_on = yes
		
		date > 1940.11.20
		date < 1942.1.1
		
		GER = { has_government = fascism }
		NOT = { 
			GER = { has_capitulated = yes }
			GER = { exists = no }
			GER = { is_puppet = yes }
		}
	}
	abort = {
		OR = {
			ROM = { is_in_faction_with = GER }
			NOT = { date < 1942.1.1 }
			
			NOT = { GER = { has_government = fascism } }
			GER = { has_capitulated = yes }
			GER = { exists = no }
			GER = { is_puppet = yes }
		}
	}
	
	ai_strategy = { type = befriend id = "GER" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = 500 }
	ai_strategy = { type = ignore id = "GER" value = -500 }
	ai_strategy = { type = antagonize id = "GER" value = -500 }
	
	ai_strategy = { type = befriend id = "ROM" value = 500 }
	ai_strategy = { type = alliance id = "ROM" value = 500 }
	ai_strategy = { type = ignore id = "ROM" value = -500 }
	ai_strategy = { type = antagonize id = "ROM" value = -500 }
}

#hungary joins axis
hun_joins_axis_0 = {
	enable = {
		GER = { is_ai = yes }
		OR = { tag = HUN tag = GER }
		is_historical_focus_on = yes
		NOT = { date > 1940.11.15 }
	}
	abort = {
		date > 1940.11.15
	}
	
	ai_strategy = { type = ignore id = "GER" value = 200 }
	ai_strategy = { type = ignore id = "HUN" value = 200 }
	ai_strategy = { type = antagonize id = "GER" value = 200 }
	ai_strategy = { type = antagonize id = "HUN" value = 200 }
}
hun_joins_axis = {
	enable = {
		GER = { is_ai = yes }
		OR = {
			AND = {
				tag = HUN
				any_neighbor_country = { is_in_faction_with = GER }
			}
			tag = GER
		}
		
		is_historical_focus_on = yes
		
		date > 1940.11.15
		date < 1942.1.1
		
		GER = { has_government = fascism }
		NOT = { 
			GER = { has_capitulated = yes }
			GER = { exists = no }
			GER = { is_puppet = yes }
		}
	}
	abort = {
		OR = {
			HUN = { is_in_faction_with = GER }
			NOT = { date < 1942.1.1 }
			
			NOT = { GER = { has_government = fascism } }
			GER = { has_capitulated = yes }
			GER = { exists = no }
			GER = { is_puppet = yes }
		}
	}
	ai_strategy = { type = befriend id = "GER" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = 500 }
	ai_strategy = { type = ignore id = "GER" value = -500 }
	ai_strategy = { type = antagonize id = "GER" value = -500 }
	
	ai_strategy = { type = befriend id = "HUN" value = 500 }
	ai_strategy = { type = alliance id = "HUN" value = 500 }
	ai_strategy = { type = ignore id = "HUN" value = -500 }
	ai_strategy = { type = antagonize id = "HUN" value = -500 }
}

#bulgaria joins axis
bul_joins_axis_0 = {
	enable = {
		GER = { is_ai = yes }
		OR = { tag = BUL tag = GER }
		is_historical_focus_on = yes
		NOT = { date > 1941.2.20 }
	}
	abort = {
		date > 1941.3.1
	}
	
	ai_strategy = { type = ignore id = "GER" value = 200 }
	ai_strategy = { type = ignore id = "BUL" value = 200 }
	ai_strategy = { type = antagonize id = "GER" value = 200 }
	ai_strategy = { type = antagonize id = "BUL" value = 200 }
}
bul_joins_axis = {
	enable = {
		GER = { is_ai = yes }
		OR = {
			AND = {
				tag = BUL
				any_neighbor_country = { is_in_faction_with = GER }
			}
			tag = GER
		}
		
		is_historical_focus_on = yes
		
		date > 1941.3.1
		date < 1942.1.1

		GER = { has_government = fascism }
		NOT = { 
			GER = { has_capitulated = yes }
			GER = { exists = no }
			GER = { is_puppet = yes }
		}
	}
	abort = {
		OR = {
			BUL = { is_in_faction_with = GER }
			NOT = { date < 1942.1.1 }
			
			NOT = { GER = { has_government = fascism } }
			GER = { has_capitulated = yes }
			GER = { exists = no }
			GER = { is_puppet = yes }
		}
	}
	
	ai_strategy = { type = befriend id = "GER" value = 500 }
	ai_strategy = { type = alliance id = "GER" value = 500 }
	ai_strategy = { type = ignore id = "GER" value = -500 }
	ai_strategy = { type = antagonize id = "GER" value = -500 }
	
	ai_strategy = { type = befriend id = "BUL" value = 500 }
	ai_strategy = { type = alliance id = "BUL" value = 500 }
	ai_strategy = { type = ignore id = "BUL" value = -500 }
	ai_strategy = { type = antagonize id = "BUL" value = -500 }
}

bulgaria_stop_doing_crazy_things = {
	enable = { tag = BUL is_historical_focus_on = yes }
	abort = { always = no }
	
	ai_strategy = { type = ignore id = "GRE" value = 1000 }
	ai_strategy = { type = ignore id = "YUG" value = 1000 }
	ai_strategy = { type = ignore id = "ROM" value = 1000 }
	ai_strategy = { type = ignore id = "TUR" value = 1000 }
	
	ai_strategy = { type = conquer id = "GRE" value = -1000 }
	ai_strategy = { type = conquer id = "YUG" value = -1000 }
	ai_strategy = { type = conquer id = "ROM" value = -1000 }
	ai_strategy = { type = conquer id = "TUR" value = -1000 }
	
	ai_strategy = { type = antagonize id = "GRE" value = -1000 }
	ai_strategy = { type = antagonize id = "YUG" value = -1000 }
	ai_strategy = { type = antagonize id = "ROM" value = -1000 }
	ai_strategy = { type = antagonize id = "TUR" value = -1000 }
}