######################################################
#	RESEARCH PRIORITY MACROS
#	for techs that must be researched on time
#	editing this can break research: when two techs prioritise each other, meaning the AI never researches either
######################################################

prioritise_industry = {
	OR = {
		AND = { date > 1942.4.1 OR = { can_research = concentrated_industry5 can_research = dispersed_industry5 } 	NOT = { has_tech = concentrated_industry5 is_researching_technology = concentrated_industry5 has_tech = dispersed_industry5 is_researching_technology = dispersed_industry5 } }
		AND = { date > 1943.1.1 OR = { can_research = streamlined_line can_research = flexible_line }				NOT = { has_tech = streamlined_line is_researching_technology = streamlined_line has_tech = flexible_line is_researching_technology = flexible_line } }
		AND = { date > 1942.8.1 can_research = construction5														NOT = { has_tech = construction5 is_researching_technology = construction5 } }

		AND = { date > 1940.4.1 OR = { can_research = concentrated_industry4 can_research = dispersed_industry4 }	NOT = { has_tech = concentrated_industry4 is_researching_technology = concentrated_industry4 has_tech = dispersed_industry4 is_researching_technology = dispersed_industry4 } }
		AND = { date > 1941.1.1 can_research = assembly_line_production												NOT = { has_tech = assembly_line_production is_researching_technology = assembly_line_production } }
		AND = { date > 1940.8.1 can_research = construction4														NOT = { has_tech = construction4 is_researching_technology = construction4 } }

		AND = { date > 1938.4.1 OR = { can_research = concentrated_industry3 can_research = dispersed_industry3 }	NOT = { has_tech = concentrated_industry3 is_researching_technology = concentrated_industry3 has_tech = dispersed_industry3 is_researching_technology = dispersed_industry3 } }
		AND = { date > 1939.1.1 can_research = advanced_machine_tools												NOT = { has_tech = advanced_machine_tools is_researching_technology = advanced_machine_tools } }
		AND = { date > 1938.8.1 can_research = construction3														NOT = { has_tech = construction3 is_researching_technology = construction3 } }

		AND = { date > 1936.1.1 OR = { can_research = concentrated_industry2 can_research = dispersed_industry2 }	NOT = { has_tech = concentrated_industry2 is_researching_technology = concentrated_industry2 has_tech = dispersed_industry2 is_researching_technology = dispersed_industry2 } }
		AND = { date > 1936.1.1 OR = { can_research = concentrated_industry can_research = dispersed_industry }		NOT = { has_tech = concentrated_industry is_researching_technology = concentrated_industry has_tech = dispersed_industry is_researching_technology = dispersed_industry } }

		AND = { date > 1937.1.1 can_research = improved_machine_tools												NOT = { has_tech = improved_machine_tools is_researching_technology = improved_machine_tools } }
		AND = { date > 1936.1.1 can_research = basic_machine_tools													NOT = { has_tech = basic_machine_tools is_researching_technology = basic_machine_tools } }

		AND = { date > 1936.1.1 can_research = construction2 														NOT = { has_tech = construction2 is_researching_technology = construction2 } }
		AND = { date > 1936.1.1 can_research = construction1 														NOT = { has_tech = construction1 is_researching_technology = construction1 } }

		AND = { date > 1942.1.1 can_research = advanced_computing_machine 											NOT = { has_tech = advanced_computing_machine is_researching_technology = advanced_computing_machine } }
		AND = { date > 1940.1.1 can_research = improved_computing_machine 											NOT = { has_tech = improved_computing_machine is_researching_technology = improved_computing_machine } }
		AND = { date > 1938.1.1 can_research = computing_machine 													NOT = { has_tech = computing_machine is_researching_technology = computing_machine } }
		AND = { date > 1936.1.1 can_research = mechanical_computing 												NOT = { has_tech = mechanical_computing is_researching_technology = mechanical_computing } }
		AND = { date > 1936.1.1 can_research = electronic_mechanical_engineering 									NOT = { has_tech = electronic_mechanical_engineering is_researching_technology = electronic_mechanical_engineering } }

		AND = { date > 1936.1.1 synth_tech_focus = yes can_research = synth_oil_experiments 						NOT = { has_tech = synth_oil_experiments is_researching_technology = synth_oil_experiments } }
	}
}

prioritise_main_industry = {
	OR = {
		AND = { date > 1942.4.1 OR = { can_research = concentrated_industry5 can_research = dispersed_industry5 } 	NOT = { has_tech = concentrated_industry5 is_researching_technology = concentrated_industry5 has_tech = dispersed_industry5 is_researching_technology = dispersed_industry5 } }

		AND = { date > 1940.4.1 OR = { can_research = concentrated_industry4 can_research = dispersed_industry4 }	NOT = { has_tech = concentrated_industry4 is_researching_technology = concentrated_industry4 has_tech = dispersed_industry4 is_researching_technology = dispersed_industry4 } }

		AND = { date > 1938.4.1 OR = { can_research = concentrated_industry3 can_research = dispersed_industry3 }	NOT = { has_tech = concentrated_industry3 is_researching_technology = concentrated_industry3 has_tech = dispersed_industry3 is_researching_technology = dispersed_industry3 } }

		AND = { date > 1936.1.1 OR = { can_research = concentrated_industry2 can_research = dispersed_industry2 }	NOT = { has_tech = concentrated_industry2 is_researching_technology = concentrated_industry2 has_tech = dispersed_industry2 is_researching_technology = dispersed_industry2 } }
		
		AND = { date > 1936.1.1 OR = { can_research = concentrated_industry can_research = dispersed_industry }		NOT = { has_tech = concentrated_industry is_researching_technology = concentrated_industry has_tech = dispersed_industry is_researching_technology = dispersed_industry } }
	}
}

prioritise_air_doctrine = {
	air_doctrine_tech_focus = yes
	OR = {
		AND = {
			has_country_flag = OI_doctrine
			NOT = { has_tech = fighter_veteran_initiative
				is_researching_technology = fighter_veteran_initiative
				is_researching_technology = operational_destruction
				is_researching_technology = dispersed_fighting
				is_researching_technology = low_echelon_support
				is_researching_technology = fighter_baiting
				is_researching_technology = force_rotation
			}
		}

		AND = {
			has_country_flag = BFS_doctrine
			NOT = { has_tech = combat_unit_destruction
				is_researching_technology = combat_unit_destruction
				is_researching_technology = hunt_and_destroy
				is_researching_technology = formation_fighting
				is_researching_technology = direct_ground_support
				is_researching_technology = dive_bombing
				is_researching_technology = formation_flying
			}
		}

		AND = {
			has_country_flag = SD_doctrine
			NOT = { has_tech = mass_destruction
				is_researching_technology = mass_destruction
				is_researching_technology = flying_fortress
				is_researching_technology = massed_bomber_formations
				is_researching_technology = night_bombing
				is_researching_technology = logistical_bombing
				is_researching_technology = multialtitude_flying
				is_researching_technology = dogfighting_experience
				is_researching_technology = naval_strike_tactics
				is_researching_technology = infrastructure_destruction
				is_researching_technology = air_superiority
			}
		}
	}
}

prioritise_naval_doctrine = {
	naval_doctrine_tech_focus = yes
	OR = {
		AND = {
			has_country_flag = BS_doctrine
			NOT = { has_tech = massed_strikes
				is_researching_technology = massed_strikes
				is_researching_technology = floating_airfield_bs
				is_researching_technology = carrier_task_forces
				is_researching_technology = carrier_primacy
				is_researching_technology = base_strike
			}
		}

		AND = {
			has_country_flag = FIB_doctrine
			NOT = { has_tech = floating_fortress
				is_researching_technology = floating_fortress
				is_researching_technology = hunter_killer_groups
				is_researching_technology = subsidiary_carrier_role
				is_researching_technology = battlefleet_concentration
				is_researching_technology = fleet_in_being
			}
		}
	}
}

prioritise_support = { #essential techs
	date > 1938.1.1
	OR = {
		AND = { can_research = tech_support NOT = { has_tech = tech_support is_researching_technology = tech_support } }
		AND = { can_research = tech_engineers NOT = { has_tech = tech_engineers is_researching_technology = tech_engineers } }
		AND = { can_research = radio NOT = { has_tech = radio is_researching_technology = radio } }
		AND = { can_research = motorised_infantry NOT = { has_tech = motorised_infantry is_researching_technology = motorised_infantry } }
		AND = { can_research = interwar_antitank NOT = { has_tech = interwar_antitank is_researching_technology = interwar_antitank } }
		AND = { can_research = gw_artillery NOT = { has_tech = gw_artillery is_researching_technology = gw_artillery } }

		AND = {
			maintenance_tech_focus = yes
			can_research = tech_maintenance_company NOT = { has_tech = tech_maintenance_company is_researching_technology = tech_maintenance_company }
		}
		AND = {
			hospital_tech_focus = yes
			can_research = tech_field_hospital NOT = { has_tech = tech_field_hospital is_researching_technology = tech_field_hospital }
		}
		AND = {
			logistics_tech_focus = yes
			can_research = tech_logistics_company NOT = { has_tech = tech_logistics_company is_researching_technology = tech_logistics_company }
		}
		AND = {
			recon_tech_focus = yes
			can_research = tech_recon NOT = { has_tech = tech_recon is_researching_technology = tech_recon }
		}
		AND = {
			signal_tech_focus = yes
			can_research = tech_signal_company NOT = { has_tech = tech_signal_company is_researching_technology = tech_signal_company }
		}
	}
}

prioritise_armor = {
	armor_tech_focus = yes
	NOT = { num_of_military_factories < 10 }
	
	if = { limit = { NOT = { major_country = yes } } #with limited research, minors can't afford this
		NOT = { has_global_flag = EAI_limit_research }
	}
	
	OR = {
		AND = {
			OR = {
				has_country_flag = marm_army_focus 
				AND = { has_country_flag = marm_attachment has_country_flag = AT_army_focus }
			}
			OR = {
				AND = { date > 1942.6.1 NOT = { has_equipment = { medium_tank_equipment < 100 } } can_research = advanced_medium_tank NOT = { has_tech = advanced_medium_tank is_researching_technology = advanced_medium_tank } }
			
				AND = { date > 1941.1.1 can_research = improved_medium_tank NOT = { has_tech = improved_medium_tank is_researching_technology = improved_medium_tank } }

				AND = { date > 1938.1.1 NOT = { GER_SOV_armor_tech_bonus = yes } can_research = basic_medium_tank NOT = { has_tech = basic_medium_tank is_researching_technology = basic_medium_tank } }
				AND = { date > 1937.1.1 GER_SOV_armor_tech_bonus = yes can_research = basic_medium_tank NOT = { has_tech = basic_medium_tank is_researching_technology = basic_medium_tank } }

				AND = { date > 1937.1.1 can_research = improved_light_tank NOT = { has_tech = improved_light_tank is_researching_technology = improved_light_tank } }

				AND = { date > 1937.1.1 can_research = basic_light_tank NOT = { has_tech = basic_light_tank is_researching_technology = basic_light_tank } }

				AND = { date > 1937.1.1 can_research = gwtank NOT = { has_tech = gwtank is_researching_technology = gwtank } }
			}
		}
		AND = {
			OR = {
				has_country_flag = harm_army_focus 
				AND = { has_country_flag = harm_attachment has_country_flag = AT_army_focus }
			}
			OR = {
				AND = { date > 1942.6.1 NOT = { has_equipment = { heavy_tank_equipment < 100 } } can_research = advanced_heavy_tank NOT = { has_tech = advanced_heavy_tank is_researching_technology = advanced_heavy_tank } }
				AND = { date > 1940.1.1 can_research = improved_heavy_tank NOT = { has_tech = improved_heavy_tank is_researching_technology = improved_heavy_tank } }
				AND = { date > 1936.1.1 can_research = basic_heavy_tank NOT = { has_tech = basic_heavy_tank is_researching_technology = basic_heavy_tank } }
			}
		}
	}
}

prioritise_air = {
	major_country = yes
	OR = {
		AND = { date > 1943.6.1 ftr_tech_focus = yes can_research = fighter3 NOT = { has_tech = fighter3 is_researching_technology = fighter3 } }
		AND = { date > 1939.6.1 ftr_tech_focus = yes can_research = fighter2 NOT = { has_tech = fighter2 is_researching_technology = fighter2 } }
		AND = { date > 1937.1.1 ftr_tech_focus = yes can_research = fighter1 NOT = { has_tech = fighter1 is_researching_technology = fighter1 } }

		AND = { date > 1943.6.1 cas_tech_focus = yes can_research = CAS3 NOT = { has_tech = CAS3 is_researching_technology = CAS3 } }
		AND = { date > 1939.6.1 cas_tech_focus = yes can_research = CAS2 NOT = { has_tech = CAS2 is_researching_technology = CAS2 } }
		AND = { date > 1937.1.1 cas_tech_focus = yes can_research = CAS1 NOT = { has_tech = CAS1 is_researching_technology = CAS1 } }

		#AND = { date > 1943.6.1 tac_tech_focus = yes can_research = tactical_bomber3 NOT = { has_tech = tactical_bomber3 is_researching_technology = tactical_bomber3 } }
		#AND = { date > 1939.6.1 tac_tech_focus = yes can_research = tactical_bomber2 NOT = { has_tech = tactical_bomber2 is_researching_technology = tactical_bomber2 } }
		AND = { date > 1937.1.1 tac_tech_focus = yes can_research = tactical_bomber1 NOT = { has_tech = tactical_bomber1 is_researching_technology = tactical_bomber1 } }

		AND = { date > 1943.6.1 str_tech_focus = yes can_research = strategic_bomber3 NOT = { has_tech = strategic_bomber3 is_researching_technology = strategic_bomber3 } }
		AND = { date > 1939.6.1 str_tech_focus = yes can_research = strategic_bomber2 NOT = { has_tech = strategic_bomber2 is_researching_technology = strategic_bomber2 } }
		AND = { date > 1937.1.1 str_tech_focus = yes can_research = strategic_bomber1 NOT = { has_tech = strategic_bomber1 is_researching_technology = strategic_bomber1 } }
	}
}

prioritise_navy = {
	OR = {
		AND = { date > 1937.1.1 navy_tech_focus = yes can_research = basic_destroyer NOT = { has_tech = basic_destroyer is_researching_technology = basic_destroyer } }
		AND = { date > 1936.1.1 navy_tech_focus = yes can_research = early_destroyer NOT = { has_tech = early_destroyer is_researching_technology = early_destroyer } }

		AND = { date > 1937.1.1 navy_tech_focus = yes can_research = basic_light_cruiser NOT = { has_tech = basic_light_cruiser is_researching_technology = basic_light_cruiser } }
		AND = { date > 1936.1.1 navy_tech_focus = yes can_research = early_light_cruiser NOT = { has_tech = early_light_cruiser is_researching_technology = early_light_cruiser } }

		AND = { date > 1937.1.1 capital_tech_focus = yes can_research = basic_battleship NOT = { has_tech = basic_battleship is_researching_technology = basic_battleship } }
		AND = { date > 1936.1.1 capital_tech_focus = yes can_research = early_battleship NOT = { has_tech = early_battleship is_researching_technology = early_battleship } }

		AND = { date > 1937.1.1 carrier_tech_focus = yes can_research = basic_carrier NOT = { has_tech = basic_carrier is_researching_technology = basic_carrier } }
		AND = { date > 1936.1.1 carrier_tech_focus = yes can_research = early_carrier NOT = { has_tech = early_carrier is_researching_technology = early_carrier } }
	}
}

prioritise_transport = {
	transport_tech_focus = yes
	OR = {
		AND = { date > 1943.1.1 can_research = tank_landing_craft NOT = { has_tech = tank_landing_craft is_researching_technology = tank_landing_craft } }
		AND = { date > 1940.1.1 can_research = landing_craft NOT = { has_tech = landing_craft is_researching_technology = landing_craft } }
	}
}

prioritise_land_doctrine = {
	if = { limit = { has_global_flag = EAI_limit_research } #with limited research, dont rush land doctrine
		major_country = yes
	}

	OR = {
		land_doctrine_tech_focus = yes

		has_war = yes
		mobilize_army = yes

		AND = {
			NOT = { land_doctrine_tech_focus = yes }
			date > 1937.6.1
		}
	}

	NOT = { has_idea = FRA_victors_of_wwi } #FRA has a land doctrine debuff
	
	if = { limit = { original_tag = USA } #lower prio for USA
		OR = {
			date > 1938.6.1
			has_war = yes
		}
	}

	NOT = {
		has_tech = modern_blitzkrieg 		has_tech = nd_conscription
		has_tech = shock_and_awe 			has_tech = air_land_battle
		has_tech = infiltration_in_depth 	has_tech = c3i_theory
		has_tech = continuous_offensive 	has_tech = guerilla_warfare

		is_researching_technology = mobile_warfare			is_researching_technology = superior_firepower			is_researching_technology = trench_warfare				is_researching_technology = mass_assault

		is_researching_technology = delay					is_researching_technology = sup_delay					is_researching_technology = grand_battle_plan			is_researching_technology = pocket_defence
		is_researching_technology = elastic_defence			is_researching_technology = mobile_defence				is_researching_technology = prepared_defense			is_researching_technology = defence_in_depth
		is_researching_technology = armored_spearhead		is_researching_technology = intergrated_support			is_researching_technology = grand_assault				is_researching_technology = large_front_operations
		is_researching_technology = schwerpunk				is_researching_technology = regimental_combat_teams		is_researching_technology = infantry_offensive			is_researching_technology = deep_operations
		is_researching_technology = blitzkrieg				is_researching_technology = sup_mechanized_offensive	is_researching_technology = armored_operations			is_researching_technology = operational_concentration
		is_researching_technology = kampfgruppe				is_researching_technology = centralized_fire_control	is_researching_technology = infiltration_assault		is_researching_technology = vast_offensives
		is_researching_technology = firebrigades			is_researching_technology = forward_observers			is_researching_technology = night_assault_tactics		is_researching_technology = breakthrough_priority
		is_researching_technology = backhand_blow			is_researching_technology = advanced_firebases			is_researching_technology = attritional_containment		is_researching_technology = mechanized_wave
		is_researching_technology = modern_blitzkrieg		is_researching_technology = shock_and_awe				is_researching_technology = infiltration_in_depth		is_researching_technology = continuous_offensive

		is_researching_technology = mobile_infantry			is_researching_technology = concentrated_fire_plans		is_researching_technology = grand_mechanized_offensive	is_researching_technology = peoples_army
		is_researching_technology = mass_motorization		is_researching_technology = combined_arms		        is_researching_technology = assault_concentration		is_researching_technology = human_infantry_offensive
		is_researching_technology = mechanised_offensive	is_researching_technology = tactical_control		    is_researching_technology = branch_interoperation	    is_researching_technology = large_front_offensive
		is_researching_technology = volkssturm				is_researching_technology = air_land_battle			    is_researching_technology = assault_breakthrough	    is_researching_technology = human_wave_offensive
		is_researching_technology = nd_conscription	   		is_researching_technology = dispersed_support	        is_researching_technology = central_planning	        is_researching_technology = guerilla_warfare
															is_researching_technology = overwhelming_firepower	    is_researching_technology = c3i_theory
	}
}

prioritise_marines = {
	has_country_flag = marine_army_focus
	OR = {
		#AND = { date > 1943.1.1 NOT = { has_tech = marines3 is_researching_technology = marines3 } }
		#AND = { date > 1939.1.1 NOT = { has_tech = marines2 is_researching_technology = marines2 } }
		AND = { date > 1937.1.1 NOT = { has_tech = marines is_researching_technology = marines } }
	}
}

prioritise_mountaineers = {
	has_country_flag = mountaineer_army_focus
	OR = {
		#AND = { date > 1943.1.1 NOT = { has_tech = tech_mountaineers3 is_researching_technology = tech_mountaineers3 } }
		#AND = { date > 1939.1.1 NOT = { has_tech = tech_mountaineers2 is_researching_technology = tech_mountaineers2 } }
		AND = { date > 1937.1.1 NOT = { has_tech = tech_mountaineers is_researching_technology = tech_mountaineers } }
	}
}

prioritise_infantry = {
	AND = {
		OR = {
			AND = { date > 1939.1.1 can_research = infantry_weapons NOT = { has_tech = infantry_weapons is_researching_technology = infantry_weapons } }
			AND = { date > 1939.1.1 can_research = infantry_weapons1 NOT = { has_tech = infantry_weapons1 is_researching_technology = infantry_weapons1 } }
			AND = { date > 1939.1.1 can_research = infantry_weapons2 NOT = { has_tech = infantry_weapons2 is_researching_technology = infantry_weapons2 } }

			AND = { date > 1939.1.1 can_research = support_weapons NOT = { has_tech = support_weapons is_researching_technology = support_weapons } }
			AND = { date > 1939.1.1 can_research = support_weapons2 NOT = { has_tech = support_weapons2 is_researching_technology = support_weapons2 } }
		}
	}
}

prioritise_artillery = {
	OR = {
		AND = {
			artillery_tech_focus = yes
			OR = {
				AND = { can_research = gw_artillery NOT = { has_tech = gw_artillery is_researching_technology = gw_artillery } }
				AND = { date > 1937.6.1 can_research = interwar_artillery NOT = { has_tech = interwar_artillery is_researching_technology = interwar_artillery } }
				AND = { date > 1938.6.1 can_research = artillery1 NOT = { has_tech = artillery1 is_researching_technology = artillery1 } }
				AND = { date > 1939.6.1 can_research = artillery2 NOT = { has_tech = artillery2 is_researching_technology = artillery2 } }
				#AND = { date > 1940.6.1 can_research = artillery3 NOT = { has_tech = artillery3 is_researching_technology = artillery3 } }
				#AND = { date > 1941.6.1 can_research = artillery4 NOT = { has_tech = artillery4 is_researching_technology = artillery4 } }
				#AND = { date > 1942.6.1 can_research = artillery5 NOT = { has_tech = artillery5 is_researching_technology = artillery5 } }
			}
		}
		AND = {
			rart_tech_focus = yes
			OR = {
				AND = { date > 1940.1.1 can_research = rocket_artillery NOT = { has_tech = rocket_artillery is_researching_technology = rocket_artillery } }
				#AND = { date > 1940.1.1 can_research = rocket_artillery2 NOT = { has_tech = rocket_artillery2 is_researching_technology = rocket_artillery2 } }
				#AND = { date > 1941.1.1 can_research = rocket_artillery3 NOT = { has_tech = rocket_artillery3 is_researching_technology = rocket_artillery3 } }
				#AND = { date > 1942.1.1 can_research = rocket_artillery4 NOT = { has_tech = rocket_artillery4 is_researching_technology = rocket_artillery4 } }
			}
		}
	}
}

prioritise_anti_tank = {
	anti_tank_tech_focus = yes
	OR = {
		AND = {
			has_country_flag = at_design_AT
			OR = {
				#AND = { can_research = interwar_antitank NOT = { has_tech = interwar_antitank is_researching_technology = interwar_antitank } }
				AND = { date > 1938.1.1 can_research = antitank1 NOT = { has_tech = antitank1 is_researching_technology = antitank1 } }
				AND = { date > 1939.1.1 can_research = antitank2 NOT = { has_tech = antitank2 is_researching_technology = antitank2 } }
				AND = { date > 1940.1.1 can_research = antitank3 NOT = { has_tech = antitank3 is_researching_technology = antitank3 } }
				AND = { date > 1941.1.1 can_research = antitank4 NOT = { has_tech = antitank4 is_researching_technology = antitank4 } }
				AND = { date > 1942.1.1 can_research = antitank5 NOT = { has_tech = antitank5 is_researching_technology = antitank5 } }
			}
		}
		AND = {
			has_country_flag = at_design_MTD
			NOT = { num_of_military_factories < 10 }
			OR = {
				AND = { date > 1937.1.1 can_research = basic_light_tank NOT = { has_tech = basic_light_tank is_researching_technology = basic_light_tank } }
				AND = { date > 1937.1.1 can_research = improved_light_tank NOT = { has_tech = improved_light_tank is_researching_technology = improved_light_tank } }

				AND = { date > 1938.1.1 can_research = basic_medium_tank NOT = { has_tech = basic_medium_tank is_researching_technology = basic_medium_tank } }
				AND = { date > 1938.1.1 can_research = basic_medium_td NOT = { has_tech = basic_medium_td is_researching_technology = basic_medium_td } }

				AND = { date > 1940.6.1 can_research = improved_medium_tank NOT = { has_tech = improved_medium_tank is_researching_technology = improved_medium_tank } }
				AND = { date > 1940.6.1 can_research = improved_medium_td NOT = { has_tech = improved_medium_td is_researching_technology = improved_medium_td } }

				AND = { date > 1942.6.1 NOT = { has_equipment = { medium_tank_equipment < 100 } } can_research = advanced_medium_tank NOT = { has_tech = advanced_medium_tank is_researching_technology = advanced_medium_tank } }
				AND = { date > 1942.6.1 can_research = advanced_medium_td NOT = { has_tech = advanced_medium_td is_researching_technology = advanced_medium_td } }
			}
		}
		AND = {
			has_country_flag = at_design_HTD
			NOT = { num_of_military_factories < 10 }
			OR = {
				AND = { date > 1937.1.1 can_research = basic_heavy_tank NOT = { has_tech = basic_heavy_tank is_researching_technology = basic_heavy_tank } }
				AND = { date > 1937.1.1 can_research = basic_heavy_td NOT = { has_tech = basic_heavy_td is_researching_technology = basic_heavy_td } }

				AND = { date > 1940.6.1 can_research = improved_heavy_tank NOT = { has_tech = improved_heavy_tank is_researching_technology = improved_heavy_tank } }
				AND = { date > 1940.6.1 can_research = improved_heavy_td NOT = { has_tech = improved_heavy_td is_researching_technology = improved_heavy_td } }

				AND = { date > 1942.6.1 NOT = { has_equipment = { heavy_tank_equipment < 100 } } can_research = advanced_heavy_tank NOT = { has_tech = advanced_heavy_tank is_researching_technology = advanced_heavy_tank } }
				AND = { date > 1942.6.1 can_research = advanced_heavy_td NOT = { has_tech = advanced_heavy_td is_researching_technology = advanced_heavy_td } }
			}
		}
	}
}