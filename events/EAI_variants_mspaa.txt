add_namespace = EAI_V_MSPAA

#M-SPAA I

country_event = { #220 XP
	id = EAI_V_MSPAA.1
	hidden = yes
	mean_time_to_happen = { days = 10 }
	trigger = {
		is_ai = yes
		has_tech = basic_medium_spaa NOT = { has_tech = improved_medium_spaa }
		has_army_experience > 45
		NOT = { has_country_flag = mspaa_I_8/8 }
		OR = { #develop other variants first
			AND = {
				OR = { original_tag = GER original_tag = SOV original_tag = USA original_tag = ENG }
				marm_developed = yes
			}
			NOT = { original_tag = GER original_tag = SOV original_tag = USA original_tag = ENG }
		}
	}
	
	immediate = {
		if = { limit = { NOT = { original_tag = ENG original_tag = FRA original_tag = USA original_tag = GER original_tag = ITA original_tag = JAP original_tag = SOV } }
		
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA I Mk. 1" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA I Mk. 2" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA I Mk. 3" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 0 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA I Mk. 4" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA I Mk. 5" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 2 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA I Mk. 6" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA I Mk. 7" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA I Mk. 8" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 3 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = ENG }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Crusader AA Mk. I" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Crusader AA Mk. II" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Crusader AA Mk. III" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Crusader AA Mk. IV" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Crusader AA Mk. V" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Crusader AA Mk. VI" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Crusader AA Mk. VII" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Crusader AA Mk. VIII" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = FRA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA série A" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA série B" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA série C" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA série D" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA série E" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA série F" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA série G" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA série H" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = USA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA A1" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA A2" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA A3" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA A4" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA A5" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA A6" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA A7" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA A8" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = GER }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. A" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. B" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. C" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. D" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. E" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. F" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. G" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Flakpanzer III Möbelwagen Ausf. H" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = ITA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA I serie I" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA I serie II" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA I serie III" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA I serie IV" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = {	 limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA I serie V" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA I serie VI" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA I serie VII" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA I serie VIII" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = JAP }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA Mk1" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA Mk2" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA Mk3" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA Mk4" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA Mk5" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA Mk6" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA Mk7" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA Mk8" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
		
		if = { limit = { original_tag = SOV }
			
			if = { limit = { NOT = { has_country_flag = mspaa_I_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "ZSU-37-32 A" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_I_1/8
			}
			if = { limit = { has_country_flag = mspaa_I_1/8 NOT = { has_country_flag = mspaa_I_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "ZSU-37-32 B" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_I_2/8
			}
			if = { limit = { has_country_flag = mspaa_I_2/8 NOT = { has_country_flag = mspaa_I_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "ZSU-37-32 C" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_I_3/8
			}
			if = { limit = { has_country_flag = mspaa_I_3/8 NOT = { has_country_flag = mspaa_I_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "ZSU-37-32 D" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_I_4/8
			}
			if = { limit = { has_country_flag = mspaa_I_4/8 NOT = { has_country_flag = mspaa_I_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "ZSU-37-32 E" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_I_5/8
			}
			if = { limit = { has_country_flag = mspaa_I_5/8 NOT = { has_country_flag = mspaa_I_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "ZSU-37-32 F" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_I_6/8
			}
			if = { limit = { has_country_flag = mspaa_I_6/8 NOT = { has_country_flag = mspaa_I_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "ZSU-37-32 G" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_I_7/8
			}
			if = { limit = { has_country_flag = mspaa_I_7/8 NOT = { has_country_flag = mspaa_I_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "ZSU-37-32 H" type = medium_tank_aa_equipment_1 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_I_8/8
			}
		}
	}
	
	option = { }
}

#M-SPAA II

country_event = {
	id = EAI_V_MSPAA.2
	hidden = yes
	mean_time_to_happen = { days = 10 }
	trigger = {
		is_ai = yes
		has_tech = improved_medium_spaa NOT = { has_tech = advanced_medium_spaa }
		has_army_experience > 45
		NOT = { has_country_flag = mspaa_II_8/8 }
		OR = { #develop other variants first
			AND = {
				OR = { original_tag = GER original_tag = SOV original_tag = USA original_tag = ENG }
				marm_developed = yes
			}
			NOT = { original_tag = GER original_tag = SOV original_tag = USA original_tag = ENG }
		}
	}
	
	immediate = {
		if = { limit = { NOT = { original_tag = ENG original_tag = FRA original_tag = USA original_tag = GER original_tag = ITA original_tag = JAP original_tag = SOV } }
		
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA II Mk. 1" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA II Mk. 2" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA II Mk. 3" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA II Mk. 4" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA II Mk. 5" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA II Mk. 6" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA II Mk. 7" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA II Mk. 8" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = ENG }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Cromwell AA Mk. I" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Cromwell AA Mk. II" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Cromwell AA Mk. III" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Cromwell AA Mk. IV" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Cromwell AA Mk. V" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Cromwell AA Mk. VI" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Cromwell AA Mk. VII" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Cromwell AA Mk. VIII" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = FRA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA II série A" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA II série B" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA II série C" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA II série D" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA II série E" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA II série F" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA II série G" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA II série H" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = USA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA II A1" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA II A2" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA II A3" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA II A4" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = {	 limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA II A5" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA II A6" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA II A7" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA II A8" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = GER }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. A" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. B" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. C" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. D" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. E" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. F" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. G" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Flakpanzer IV Ostwind Ausf. H" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = ITA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA II serie I" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA II serie II" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA II serie III" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA II serie IV" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA II serie V" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA II serie VI" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA II serie VII" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA II serie VIII" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = JAP }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA II Mk1" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA II Mk2" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA II Mk3" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA II Mk4" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA II Mk5" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA II Mk6" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA II Mk7" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA II Mk8" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8
			}
		}
		
		if = { limit = { original_tag = SOV }
			
			if = { limit = { NOT = { has_country_flag = mspaa_II_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "ZSU-37-34 A" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_II_1/8
			}
			if = { limit = { has_country_flag = mspaa_II_1/8 NOT = { has_country_flag = mspaa_II_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "ZSU-37-34 B" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_II_2/8
			}
			if = { limit = { has_country_flag = mspaa_II_2/8 NOT = { has_country_flag = mspaa_II_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "ZSU-37-34 C" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_II_3/8
			}
			if = { limit = { has_country_flag = mspaa_II_3/8 NOT = { has_country_flag = mspaa_II_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "ZSU-37-34 D" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_II_4/8
			}
			if = { limit = { has_country_flag = mspaa_II_4/8 NOT = { has_country_flag = mspaa_II_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "ZSU-37-34 E" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_II_5/8
			}
			if = { limit = { has_country_flag = mspaa_II_5/8 NOT = { has_country_flag = mspaa_II_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "ZSU-37-34 F" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_II_6/8
			}
			if = { limit = { has_country_flag = mspaa_II_6/8 NOT = { has_country_flag = mspaa_II_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "ZSU-37-34 G" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_II_7/8
			}
			if = { limit = { has_country_flag = mspaa_II_7/8 NOT = { has_country_flag = mspaa_II_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "ZSU-37-34 H" type = medium_tank_aa_equipment_2 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_II_8/8 
			}
		}
	}
	
	option = { }
}

#M-SPAA III

country_event = {
	id = EAI_V_MSPAA.3
	hidden = yes
	mean_time_to_happen = { days = 10 }
	trigger = {
		is_ai = yes
		has_tech = advanced_medium_spaa
		has_army_experience > 45
		NOT = { has_country_flag = mspaa_III_8/8 }
		OR = { #develop other variants first
			AND = {
				OR = { original_tag = GER original_tag = SOV original_tag = USA original_tag = ENG }
				marm_developed = yes
			}
			NOT = { original_tag = GER original_tag = SOV original_tag = USA original_tag = ENG }
		}
	}
	
	immediate = {
		if = { limit = { NOT = { original_tag = ENG original_tag = FRA original_tag = USA original_tag = GER original_tag = ITA original_tag = JAP original_tag = SOV } }
		
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA III Mk. 1" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA III Mk. 2" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA III Mk. 3" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA III Mk. 4" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA III Mk. 5" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA III Mk. 6" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA III Mk. 7" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA III Mk. 8" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = ENG }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Comet Marksman Mk. I" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Comet Marksman Mk. II" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Comet Marksman Mk. III" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Comet Marksman Mk. IV" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Comet Marksman Mk. V" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Comet Marksman Mk. VI" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Comet Marksman Mk. VII" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Comet Marksman Mk. VIII" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = FRA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA III série A" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA III série B" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA III série C" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA III série D" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA III série E" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA III série F" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA III série G" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA III série H" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = USA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA III A1" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA III A2" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA III A3" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA III A4" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA III A5" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA III A6" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA III A7" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA III A8" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = GER }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. A" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. B" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. C" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. D" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. E" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. F" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. G" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Flakpanzer Coelian Ausf. H" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = ITA }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "Semovente M35/42 serie I" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "Semovente M35/42 serie II" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "Semovente M35/42 serie III" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "Semovente M35/42 serie IV" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "Semovente M35/42 serie V" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "Semovente M35/42 serie VI" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "Semovente M35/42 serie VII" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "Semovente M35/42 serie VIII" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = JAP }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "M-SPAA III Mk1" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "M-SPAA III Mk2" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "M-SPAA III Mk3" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "M-SPAA III Mk4" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "M-SPAA III Mk5" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "M-SPAA III Mk6" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "M-SPAA III Mk7" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "M-SPAA III Mk8" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
		
		if = { limit = { original_tag = SOV }
			
			if = { limit = { NOT = { has_country_flag = mspaa_III_1/8 } has_army_experience > 10 }
				create_equipment_variant = { name = "ZSU-57-44 A" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 1 tank_reliability_upgrade = 0 } }
				army_experience = -10 set_country_flag = mspaa_III_1/8
			}
			if = { limit = { has_country_flag = mspaa_III_1/8 NOT = { has_country_flag = mspaa_III_2/8 } has_army_experience > 15 }
				create_equipment_variant = { name = "ZSU-57-44 B" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 2 tank_reliability_upgrade = 0 } }
				army_experience = -15 set_country_flag = mspaa_III_2/8
			}
			if = { limit = { has_country_flag = mspaa_III_2/8 NOT = { has_country_flag = mspaa_III_3/8 } has_army_experience > 20 }
				create_equipment_variant = { name = "ZSU-57-44 C" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -20 set_country_flag = mspaa_III_3/8
			}
			if = { limit = { has_country_flag = mspaa_III_3/8 NOT = { has_country_flag = mspaa_III_4/8 } has_army_experience > 25 }
				create_equipment_variant = { name = "ZSU-57-44 D" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 3 tank_reliability_upgrade = 1 } }
				army_experience = -25 set_country_flag = mspaa_III_4/8
			}
			if = { limit = { has_country_flag = mspaa_III_4/8 NOT = { has_country_flag = mspaa_III_5/8 } has_army_experience > 30 }
				create_equipment_variant = { name = "ZSU-57-44 E" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 1 } }
				army_experience = -30 set_country_flag = mspaa_III_5/8
			}
			if = { limit = { has_country_flag = mspaa_III_5/8 NOT = { has_country_flag = mspaa_III_6/8 } has_army_experience > 35 }
				create_equipment_variant = { name = "ZSU-57-44 F" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -35 set_country_flag = mspaa_III_6/8
			}
			if = { limit = { has_country_flag = mspaa_III_6/8 NOT = { has_country_flag = mspaa_III_7/8 } has_army_experience > 40 }
				create_equipment_variant = { name = "ZSU-57-44 G" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 4 tank_reliability_upgrade = 2 } }
				army_experience = -40 set_country_flag = mspaa_III_7/8
			}
			if = { limit = { has_country_flag = mspaa_III_7/8 NOT = { has_country_flag = mspaa_III_8/8 } has_army_experience > 45 }
				create_equipment_variant = { name = "ZSU-57-44 H" type = medium_tank_aa_equipment_3 upgrades = { tank_engine_upgrade = 0 tank_armor_upgrade = 0 tank_aa_upgrade = 5 tank_reliability_upgrade = 2 } }
				army_experience = -45 set_country_flag = mspaa_III_8/8
			}
		}
	}
	
	option = { }
}