add_namespace = EAI_VHA

#variant
country_event = {
	id = EAI_VHA.0
	hidden = yes
	
	mean_time_to_happen = { days = 2 }
	
	trigger = {
		is_ai = yes 
		OR = { tag = GER tag = SOV }
		has_tech = improved_heavy_tank
		NOT = { has_tech = advanced_heavy_tank }
		has_war = yes
		NOT = { has_country_flag = ha1_chain_triggered }
		any_enemy_country = { is_neighbor_of = ROOT }
		date > 1939.1.1
		has_country_flag = mt2_complete
		OR = {
			NOT = { has_country_flag = mt3_chain_triggered }
			AND = { has_country_flag = mt3_chain_triggered has_country_flag = mt3_complete }
		}
		OR = {
			NOT = { has_country_flag = mt4_chain_triggered }
			AND = { has_country_flag = mt4_chain_triggered has_country_flag = mt4_complete }
		}
		enemies_strength_ratio > 0.5
	}
	
	immediate = {
		set_country_flag = ha1_chain_triggered
		country_event = EAI_VHA.1
	}
	
	option = { name = "OK" }
}

country_event = {
	id = EAI_VHA.1
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_tech = improved_heavy_tank NOT = { has_tech = advanced_heavy_tank } }
			create_equipment_variant = { 
				name = "H-ARM II A" 
				type = heavy_tank_equipment_2
				upgrades = { 
					tank_gun_upgrade = 0
					tank_armor_upgrade = 2
					tank_reliability_upgrade = 0
				}
			}
			country_event = { id = EAI_VHA.2 days = 20 random = 10 }
			army_experience = -25
		}
	}
	
	option = { name = "OK" }
}

country_event = {
	id = EAI_VHA.2
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_tech = improved_heavy_tank NOT = { has_tech = advanced_heavy_tank } }
			create_equipment_variant = { 
				name = "H-ARM II B"
				type = heavy_tank_equipment_2
				upgrades = { 
					tank_gun_upgrade = 0
					tank_armor_upgrade = 3
					tank_reliability_upgrade = 1
				}
			}
			country_event = { id = EAI_VHA.3 days = 40 random = 10 }
			army_experience = -45
		}
	}
	
	option = { name = "OK" }
}

country_event = {
	id = EAI_VHA.3
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_tech = improved_heavy_tank NOT = { has_tech = advanced_heavy_tank } }
			create_equipment_variant = { 
				name = "H-ARM II C"
				type = heavy_tank_equipment_2
				upgrades = { 
					tank_gun_upgrade = 0
					tank_armor_upgrade = 5
					tank_reliability_upgrade = 2
				}
			} 
			army_experience = -105
			set_country_flag = ha1_complete
		}
		
	}
	option = { name = "OK" }
}









#variant
country_event = {
	id = EAI_VHA.6
	hidden = yes
	
	mean_time_to_happen = { days = 2 }
	
	trigger = {
		OR = { tag = GER tag = SOV }
		is_ai = yes
		has_tech = advanced_heavy_tank
		has_war = yes
		NOT = { has_country_flag = ha2_chain_triggered }
		OR = { any_enemy_country = { is_neighbor_of = ROOT } has_country_flag = ha1_chain_triggered }
		date > 1939.1.1
		has_country_flag = mt3_complete
		OR = {
			NOT = { has_country_flag = mt4_chain_triggered }
			AND = { has_country_flag = mt4_chain_triggered has_country_flag = mt4_complete }
		}
	}
	
	immediate = {
		set_country_flag = ha2_chain_triggered
		set_country_flag = ha1_complete
		country_event = EAI_VHA.7
	}
	
	option = { name = "OK" }
}

country_event = {
	id = EAI_VHA.7
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_tech = advanced_heavy_tank }
			create_equipment_variant = { 
				name = "H-ARM III A" 
				type = heavy_tank_equipment_3
				upgrades = { 
					tank_gun_upgrade = 0
					tank_armor_upgrade = 2
					tank_reliability_upgrade = 0
				}
			}
			country_event = { id = EAI_VHA.8 days = 20 }
			army_experience = -25
		}
	}
	
	option = { name = "OK" }
}

country_event = {
	id = EAI_VHA.8
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_tech = advanced_heavy_tank }
			create_equipment_variant = { 
				name = "H-ARM III B"
				type = heavy_tank_equipment_3
				upgrades = { 
					tank_gun_upgrade = 0
					tank_armor_upgrade = 3
					tank_reliability_upgrade = 1
				}
			}
			country_event = { id = EAI_VHA.9 days = 40 }
			army_experience = -45
		}
	}
	
	option = { name = "OK" }
}

country_event = {
	id = EAI_VHA.9
	hidden = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { has_tech = advanced_heavy_tank }
			create_equipment_variant = { 
				name = "H-ARM III C"
				type = heavy_tank_equipment_3
				upgrades = { 
					tank_gun_upgrade = 0
					tank_armor_upgrade = 5
					tank_reliability_upgrade = 2
				}
			} 
			army_experience = -105
			set_country_flag = ha2_complete
		}
		
	}
	option = { name = "OK" }
}