add_namespace = EAI_M

#startup event
country_event = {
	id = EAI_M.0
	hidden = yes
	fire_only_once = yes
	trigger = { tag = GER }
	immediate = {
		if = { limit = { is_historical_focus_on = yes } #customisation
			random_country = { limit = { is_ai = no } country_event = EAI_M.100 }
		}
		every_country = { #add resistance reduction
			limit = { is_ai = yes }
			add_ideas = ns
		}
		every_country = { #news event
			limit = { is_ai = no }
			news_event = EAI_M.2
		}
		
		#AI majors random land doctrine switch
		every_country = {
			limit = { tag = GER is_ai = yes }
			random_list = {
				10 = { set_technology = { mobile_warfare = 0 } set_technology = { superior_firepower = 1 } }
				10 = { set_technology = { mobile_warfare = 1 } }
			}
		}
		every_country = {
			limit = { tag = ITA is_ai = yes }
			random_list = {
				20 = { set_technology = { trench_warfare = 0 } set_technology = { superior_firepower = 1 } }
				20 = { set_technology = { trench_warfare = 1 } }
			}
		}
		every_country = {
			limit = { tag = JAP is_ai = yes }
			random_list = {
				30 = { set_technology = { trench_warfare = 0 } set_technology = { superior_firepower = 1 } }
				30 = { set_technology = { trench_warfare = 1 } }
			}
		}
		
		every_country = {
			limit = { tag = ENG is_ai = yes }
			random_list = {
				40 = { set_technology = { trench_warfare = 0 } set_technology = { superior_firepower = 1 } }
				40 = { set_technology = { trench_warfare = 1 } }
			}
		}
		every_country = {
			limit = { tag = FRA is_ai = yes }
			random_list = {
				50 = { set_technology = { trench_warfare = 0 } set_technology = { superior_firepower = 1 } }
				50 = { set_technology = { trench_warfare = 1 } }
			}
		}
		every_country = {
			limit = { tag = USA is_ai = yes }
			random_list = {
				60 = { set_technology = { superior_firepower = 0 } set_technology = { mobile_warfare = 1 } }
				60 = { set_technology = { superior_firepower = 1 } }
			}
		}
		every_country = {
			limit = { tag = SOV is_ai = yes }
			random_list = {
				70 = { set_technology = { mass_assault = 0 } set_technology = { superior_firepower = 1 } }
				70 = { set_technology = { mass_assault = 0 } set_technology = { trench_warfare = 1 } }
			}
		}
		
		#other doctrine switches
		every_country = {
			limit = { NOT = { tag = SOV } has_tech = mass_assault is_ai = yes }
			set_technology = { mass_assault = 0 } set_technology = { superior_firepower = 1 }
		}
		every_country = {
			limit = { tag = ENG is_ai = yes }
			set_technology = { fleet_in_being = 0 } set_technology = { base_strike = 1 }
		}
		every_country = {
			limit = { tag = ITA is_ai = yes }
			set_technology = { fleet_in_being = 0 } set_technology = { trade_interdiction = 1 }
		}
		every_country = {
			limit = { tag = RAJ is_ai = yes }
			set_technology = { mass_assault = 1 } set_technology = { trench_warfare = 0 }
		}
	}
	option = {}
}

news_event = {
	id = EAI_M.7
	title = EAI_M.14.t
	desc = EAI_M.14.d
	picture = GFX_news_event_001
	major = yes
	is_triggered_only = yes
	option = { name = "OK." }
}

####### customisation

country_event = {
	id = EAI_M.100
	title = "Expert AI Settings"
	desc = EAI_M.100.d

	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = "Normal Expert AI rules" 
		trigger = { NOT = { has_global_flag = EAI_normal has_global_flag = EAI_neutral_jap has_global_flag = EAI_neutral_spr } }
		hidden_effect = {
			set_global_flag = EAI_normal
		
			every_country = { limit = { tag = JAP is_ai = yes } add_ideas = neutrality_idea3 }
			set_global_flag = EAI_neutral_jap
			
			set_global_flag = EAI_neutral_spr
			
			country_event = EAI_M.101
		}
	}
	option = {
		name = "Customise" 
		hidden_effect = {
			country_event = EAI_M.1
		}
	}
	option = {
		name = "Exit" 
	}
}

country_event = {
	id = EAI_M.101
	title = "Expert AI Settings"
	desc = EAI_M.100.d
	
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = "Normal Expert AI rules" 
		trigger = { NOT = { has_global_flag = EAI_normal has_global_flag = EAI_neutral_jap has_global_flag = EAI_neutral_spr } }
		hidden_effect = {
			set_global_flag = EAI_normal
		
			every_country = { limit = { tag = JAP is_ai = yes } add_ideas = neutrality_idea3 }
			set_global_flag = EAI_neutral_jap
			
			set_global_flag = EAI_neutral_spr
			
			country_event = EAI_M.100
		}
	}
	option = {
		name = "Customise" 
		hidden_effect = {
			country_event = EAI_M.1
		}
	}
	option = {
		name = "Exit" 
	}
}

country_event = {
	id = EAI_M.1
	title = "Expert AI: Historical Settings"
	desc = EAI_M.1.d
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = "Keep Japan out of Axis" 
		trigger = { JAP = { is_ai = yes } NOT = { has_global_flag = EAI_neutral_jap } }
		hidden_effect = {
			every_country = { limit = { tag = JAP is_ai = yes } add_ideas = neutrality_idea3 }
			set_global_flag = EAI_neutral_jap
			
			country_event = EAI_M.2
		}
	}
	option = {
		name = "Keep Nat. Spain out of Axis" 
		trigger = { SPR = { is_ai = yes } NOT = { has_global_flag = EAI_neutral_spr } }
		hidden_effect = {
			set_global_flag = EAI_neutral_spr
			
			country_event = EAI_M.2
		}
	}
	option = {
		name = "Aggressive Germany" 
		trigger = { NOT = { has_global_flag = EAI_aggressive_GER } }
		hidden_effect = {
			set_global_flag = EAI_aggressive_GER
			
			country_event = EAI_M.2
		}
	}
	option = { 
		name = "Previous" 
		hidden_effect = {
			country_event = EAI_M.100
		}
	}
}

country_event = {
	id = EAI_M.2
	title = "Expert AI: Historical Settings"
	desc = EAI_M.1.d
	picture = GFX_report_event_chinese_soldiers_fighting
	
	is_triggered_only = yes
	
	option = {
		name = "Keep Japan out of Axis" 
		trigger = { JAP = { is_ai = yes } NOT = { has_global_flag = EAI_neutral_jap } }
		hidden_effect = {
			every_country = { limit = { tag = JAP is_ai = yes } add_ideas = neutrality_idea3 }
			set_global_flag = EAI_neutral_jap
			country_event = EAI_M.1
		}
	}
	option = {
		name = "Keep Nat. Spain out of Axis" 
		trigger = { SPR = { is_ai = yes } NOT = { has_global_flag = EAI_neutral_spr } }
		hidden_effect = {
			set_global_flag = EAI_neutral_spr
			country_event = EAI_M.1
		}
	}
	option = {
		name = "Aggressive Germany" 
		trigger = { NOT = { has_global_flag = EAI_aggressive_GER } }
		hidden_effect = {
			set_global_flag = EAI_aggressive_GER
			
			country_event = EAI_M.1
		}
	}
	option = { 
		name = "Previous" 
		hidden_effect = {
			country_event = EAI_M.100
		}
	}
}

#######

country_event = { #GER doctrine switch when out of manpower
	id = EAI_M.3
	hidden = yes
	fire_only_once = yes
	trigger = {
		tag = GER
		is_ai = yes
		OR = { has_idea = all_adults_serve AND = { has_idea = service_by_requirement has_country_flag = AAS_taken } }
		has_manpower < 1000000
		has_tech = modern_blitzkrieg
	}
	immediate = {
		set_technology = { firebrigades = 0 }
		set_technology = { backhand_blow = 0 }
		set_technology = { modern_blitzkrieg = 0 }
		set_technology = { volkssturm = 1 }
		country_event = { id = EAI_M.4 days = 222 }
		add_research_slot = -1
	}
	option = {}
}

country_event = {
	id = EAI_M.4
	hidden = yes
	is_triggered_only = yes
	
	immediate = { set_technology = { nd_conscription = 1 } country_event = { id = EAI_M.5 days = 222 } }
	option = {}	
}

country_event = {
	id = EAI_M.5
	hidden = yes
	is_triggered_only = yes
	
	immediate = { set_technology = { werwolf_guerillas = 1 } add_research_slot = 1 }
	option = {}	
}

#resistance modifier for new countries
country_event = {
	id = EAI_M.6
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes NOT = { has_idea = ns } date > 1936.2.1
	}
	immediate = {
		add_ideas = ns
	}
	option = {}
}

####### debug

#country_event = {
#	id = EAI_M.1000
#	fire_only_once = yes
#	trigger = {
#		OR = {
#			any_enemy_country = { has_army_size = { type = armor size > 10 } }  
#			AND = {
#				has_government = fascism
#				any_neighbor_country = { NOT = { has_government = fascism } has_army_size = { type = armor size > 10 } }  
#			}
#			AND = {
#				has_government = communism
#				any_neighbor_country = { NOT = { has_government = communism } has_army_size = { type = armor size > 10 } }  
#			}
#			AND = {
#				has_government = democratic
#				any_neighbor_country = { NOT = { has_government = democratic } has_army_size = { type = armor size > 10 } }  
#			}
#		}
#		OR = { original_tag = USA original_tag = ENG tag = FRA original_tag = GER original_tag = ITA original_tag = JAP original_tag = SOV } 
#	}
#
#	option = {
#	}
#}
#
#country_event = {
#	id = EAI_M.1001
#	fire_only_once = yes
#	trigger = {
#		NOT = { any_enemy_country = { has_army_size = { type = armor size > 40 } } }
#		OR = {
#			AND = {
#				has_government = fascism
#				NOT = { any_neighbor_country = { NOT = { has_government = fascism } has_army_size = { type = armor size > 10 } } } 
#			}
#			AND = {
#				has_government = communism
#				NOT = { any_neighbor_country = { NOT = { has_government = communism } has_army_size = { type = armor size > 10 } } } 
#			}
#			AND = {
#				has_government = democratic
#				NOT = { any_neighbor_country = { NOT = { has_government = democratic } has_army_size = { type = armor size > 10 } } } 
#			}
#		}
#	}
#	option = { name = "OK" 
#	}
#}
#
#country_event = {
#	id = EAI_M.1002
#	hidden = yes
#	fire_only_once = yes
#	is_triggered_only = yes
#	option = { name = "OK" 
#			random_state = { limit = { is_controlled_by = ROOT NOT = { is_in_home_area = yes } NOT = { any_neighbor_state = { NOT = { is_controlled_by = ROOT } } } free_building_slots = { building = arms_factory size > 0 include_locked = no } } add_building_construction = { type = arms_factory level = 1 instant_build = no } }
#	}
#}
#
#country_event = {
#	id = EAI_M.1003
#	hidden = yes
#	is_triggered_only = yes
#	option = { name = "OK" 
#			random_state = { limit = { is_controlled_by = ROOT NOT = { is_in_home_area = yes } NOT = { any_neighbor_state = { controller = { has_war_with = ROOT } } } free_building_slots = { building = arms_factory size > 0 include_locked = no } } add_building_construction = { type = arms_factory level = 1 instant_build = no } }
#	}
#}
#
#country_event = {
#	id = EAI_M.1004
#	hidden = yes
#	is_triggered_only = yes
#	option = { name = "OK" 
#			random_state = { limit = { is_controlled_by = ROOT free_building_slots = { building = arms_factory size > 0 include_locked = no } } add_building_construction = { type = arms_factory level = 1 instant_build = no } }
#	}
#}