add_namespace = EAI_H

country_event = {
	id = EAI_H.0
	title = "Expert AI: Difficulty settings"
	desc = EAI_H.0.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "Select bonuses for specific countries"
		hidden_effect = { country_event = { id = EAI_H.1 } }
	}

	option = {
		name = "Select a dynamic difficulty setting"
		hidden_effect = { country_event = { id = EAI_H.1000 } }
	}

	option = {
		name = "AI attrition"
		hidden_effect = { country_event = { id = EAI_H.100 } }
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_M.1000 } }
	}
}

country_event = {
	id = EAI_H.1
	title = "Expert AI: Difficulty settings"
	desc = EAI_H.1.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "Fixed bonuses"
		hidden_effect = { country_event = { id = EAI_H.2 } }
	}

	option = {
		name = "Desperate Defense"
		hidden_effect = { country_event = { id = EAI_H.10000 } }
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.0 } }
	}
}

#######################################
#	dynamic settings
#######################################

country_event = {
	id = EAI_H.1000
	title = "Expert AI: Difficulty settings > Dynamic Difficulty"
	desc = EAI_H.1000.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "Fixed bonuses"
		hidden_effect = { country_event = { id = EAI_H.1001 } }
	}

	option = {
		name = "|OFF| Desperate Defense"
		trigger = { NOT = { has_global_flag = EAI_global_desperate_defense } }
		hidden_effect = {
			set_global_flag = EAI_global_desperate_defense
			country_event = { id = EAI_H.999 }
		}
	}

	option = {
		name = "|ON| Desperate Defense"
		trigger = { has_global_flag = EAI_global_desperate_defense }
		hidden_effect = {
			clr_global_flag = EAI_global_desperate_defense
			every_country = { limit = { has_country_flag = EAI_desperate_defense } clear_desperate_defense = yes clr_country_flag = EAI_desperate_defense }
			country_event = { id = EAI_H.1000 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.0 } }
	}
}

country_event = {
	id = EAI_H.999
	title = "Expert AI: Difficulty settings > Dynamic Difficulty"
	desc = EAI_H.1000.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "Fixed bonuses"
		hidden_effect = { country_event = { id = EAI_H.1001 } }
	}

	option = {
		name = "|OFF| Desperate Defense"
		trigger = { NOT = { has_global_flag = EAI_global_desperate_defense } }
		hidden_effect = {
			set_global_flag = EAI_global_desperate_defense
			country_event = { id = EAI_H.999 }
		}
	}

	option = {
		name = "|ON| Desperate Defense"
		trigger = { has_global_flag = EAI_global_desperate_defense }
		hidden_effect = {
			clr_global_flag = EAI_global_desperate_defense
			every_country = { limit = { has_country_flag = EAI_desperate_defense } clear_desperate_defense = yes clr_country_flag = EAI_desperate_defense }
			country_event = { id = EAI_H.1000 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.0 } }
	}
}

country_event = {
	id = EAI_H.1001
	title = "Expert AI: Difficulty settings > Dynamic Difficulty"
	desc = EAI_H.1001.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "'Insane' enemies"
		trigger = { NOT = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			set_global_flag = EAI_insane_enemies
			country_event = { id = EAI_H.1002 }
		}
	}

	option = {
		name = "'Very Hard' enemies"
		trigger = { NOT = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			set_global_flag = EAI_very_hard_enemies
			country_event = { id = EAI_H.1002 }
		}
	}

	option = {
		name = "'Hard' enemies"
		trigger = { NOT = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			set_global_flag = EAI_hard_enemies
			country_event = { id = EAI_H.1002 }
		}
	}

	option = {
		name = "Disable"
		trigger = { OR = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			clr_global_flag = EAI_insane_enemies
			clr_global_flag = EAI_very_hard_enemies
			clr_global_flag = EAI_hard_enemies

			every_country = {
				limit = { has_country_flag = EAI_dynamic_difficulty }
				clr_country_flag = EAI_dynamic_difficulty
				remove_ideas = EAI_hard_mode
				remove_ideas = EAI_very_hard_mode
				remove_ideas = EAI_insane_mode
			}

			country_event = { id = EAI_H.1002 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = {
			country_event = { id = EAI_H.1000 }
		}
	}
}

country_event = {
	id = EAI_H.1002
	title = "Expert AI: Difficulty settings > Dynamic Difficulty"
	desc = EAI_H.1001.d
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "'Insane' enemies"
		trigger = { NOT = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			set_global_flag = EAI_insane_enemies
			country_event = { id = EAI_H.1001 }
		}
	}

	option = {
		name = "'Very Hard' enemies"
		trigger = { NOT = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			set_global_flag = EAI_very_hard_enemies
			country_event = { id = EAI_H.1001 }
		}
	}

	option = {
		name = "'Hard' enemies"
		trigger = { NOT = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			set_global_flag = EAI_hard_enemies
			country_event = { id = EAI_H.1001 }
		}
	}

	option = {
		name = "Disable"
		trigger = { OR = { has_global_flag = EAI_insane_enemies has_global_flag = EAI_very_hard_enemies has_global_flag = EAI_hard_enemies } }
		hidden_effect = {
			clr_global_flag = EAI_insane_enemies
			clr_global_flag = EAI_very_hard_enemies
			clr_global_flag = EAI_hard_enemies

			every_country = {
				limit = { has_country_flag = EAI_dynamic_difficulty }
				clr_country_flag = EAI_dynamic_difficulty
				remove_ideas = EAI_hard_mode
				remove_ideas = EAI_very_hard_mode
				remove_ideas = EAI_insane_mode
			}

			country_event = { id = EAI_H.1001 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = {
			country_event = { id = EAI_H.1000 }
		}
	}
}

#######################################
#	attrition reduction
#######################################

country_event = {
	id = EAI_H.100
	title = "Expert AI: Difficulty settings > Attrition"
	desc = "AI attrition reduction."
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "75% AI attrition reduction"
		trigger = { NOT = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			set_global_flag = EAI_attrition
			set_global_flag = EAI_attrition_1

			every_country = {
				limit = { is_ai = yes NOT = { has_idea = EAI_attrition_reduction3 } }
				add_ideas = EAI_attrition_reduction3
			}

			country_event = { id = EAI_H.101 }
		}
	}

	option = {
		name = "50% AI attrition reduction"
		trigger = { NOT = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			set_global_flag = EAI_attrition
			set_global_flag = EAI_attrition_2

			every_country = {
				limit = { is_ai = yes NOT = { has_idea = EAI_attrition_reduction2 } }
				add_ideas = EAI_attrition_reduction2
			}

			country_event = { id = EAI_H.101 }
		}
	}

	option = {
		name = "25% AI attrition reduction"
		trigger = { NOT = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			set_global_flag = EAI_attrition
			set_global_flag = EAI_attrition_3

			every_country = {
				limit = { is_ai = yes NOT = { has_idea = EAI_attrition_reduction } }
				add_ideas = EAI_attrition_reduction
			}

			country_event = { id = EAI_H.101 }
		}
	}

	option = {
		name = "Disable"
		trigger = { OR = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			clr_global_flag = EAI_attrition
			clr_global_flag = EAI_attrition_1
			clr_global_flag = EAI_attrition_2
			clr_global_flag = EAI_attrition_3
			country_event = { id = EAI_H.101 }

			every_country = {
				limit = { OR = { has_idea = EAI_attrition_reduction has_idea = EAI_attrition_reduction2 has_idea = EAI_attrition_reduction3 } }
				remove_ideas = EAI_attrition_reduction
				remove_ideas = EAI_attrition_reduction2
				remove_ideas = EAI_attrition_reduction3
			}
		}
	}

	option = {
		name = "<----"
		hidden_effect = {
			country_event = { id = EAI_H.0 }
		}
	}
}

country_event = {
	id = EAI_H.101
	title = "Expert AI: Difficulty settings > Attrition"
	desc = "AI attrition reduction."
	picture = GFX_report_event_chinese_soldiers_fighting
	is_triggered_only = yes

	option = {
		name = "75% AI attrition reduction"
		trigger = { NOT = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			set_global_flag = EAI_attrition
			set_global_flag = EAI_attrition_1

			every_country = {
				limit = { is_ai = yes NOT = { has_idea = EAI_attrition_reduction3 } }
				add_ideas = EAI_attrition_reduction3
			}

			country_event = { id = EAI_H.100 }
		}
	}

	option = {
		name = "50% AI attrition reduction"
		trigger = { NOT = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			set_global_flag = EAI_attrition
			set_global_flag = EAI_attrition_2

			every_country = {
				limit = { is_ai = yes NOT = { has_idea = EAI_attrition_reduction2 } }
				add_ideas = EAI_attrition_reduction2
			}

			country_event = { id = EAI_H.100 }
		}
	}

	option = {
		name = "25% AI attrition reduction"
		trigger = { NOT = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			set_global_flag = EAI_attrition
			set_global_flag = EAI_attrition_3

			every_country = {
				limit = { is_ai = yes NOT = { has_idea = EAI_attrition_reduction } }
				add_ideas = EAI_attrition_reduction
			}

			country_event = { id = EAI_H.100 }
		}
	}

	option = {
		name = "Disable"
		trigger = { OR = { has_global_flag = EAI_attrition } }
		hidden_effect = {
			clr_global_flag = EAI_attrition
			clr_global_flag = EAI_attrition_1
			clr_global_flag = EAI_attrition_2
			clr_global_flag = EAI_attrition_3
			country_event = { id = EAI_H.100 }

			every_country = {
				limit = { OR = { has_idea = EAI_attrition_reduction has_idea = EAI_attrition_reduction2 has_idea = EAI_attrition_reduction3 } }
				remove_ideas = EAI_attrition_reduction
				remove_ideas = EAI_attrition_reduction2
				remove_ideas = EAI_attrition_reduction3
			}
		}
	}

	option = {
		name = "<----"
		hidden_effect = {
			country_event = { id = EAI_H.0 }
		}
	}
}

#######################################
#	country specific bonuses
#######################################

#categories
country_event = {
	id = EAI_H.2
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a category."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Majors"

		hidden_effect = {
			country_event = EAI_H.10
		}
	}
	option = {
		name = "Minors"

		hidden_effect = {
			country_event = EAI_H.20
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.1
		}
	}
}

#majors
country_event = {
	id = EAI_H.10
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Germany"

		hidden_effect = {
			GER = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Italy"

		hidden_effect = {
			ITA = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Japan"

		hidden_effect = {
			JAP = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 2/3"

		hidden_effect = {
			country_event = EAI_H.11
		}
	}
}
country_event = {
	id = EAI_H.11
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "United Kingdom"

		hidden_effect = {
			ENG = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "France"

		hidden_effect = {
			FRA = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "United States"

		hidden_effect = {
			USA = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 3/3"

		hidden_effect = {
			country_event = EAI_H.12
		}
	}
}
country_event = {
	id = EAI_H.12
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Soviet Union"

		hidden_effect = {
			SOV = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 1/3"

		hidden_effect = {
			country_event = EAI_H.10
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.2
		}
	}
}

#minor categories
country_event = {
	id = EAI_H.20
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a category."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "'Death Or Dishonor' minors"

		hidden_effect = {
			country_event = EAI_H.30
		}
	}
	option = {
		name = "'Together For Victory' minors"

		hidden_effect = {
			country_event = EAI_H.40
		}
	}
	option = {
		name = "Other"

		hidden_effect = {
			country_event = EAI_H.50
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.2
		}
	}
}

#DOD
country_event = {
	id = EAI_H.30
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Romania"

		hidden_effect = {
			ROM = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Hungary"

		hidden_effect = {
			HUN = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Yugoslavia"

		hidden_effect = {
			YUG = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 2/2"

		hidden_effect = {
			country_event = EAI_H.31
		}
	}
}
country_event = {
	id = EAI_H.31
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Czechoslovakia"

		hidden_effect = {
			CZE = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 1/2"

		hidden_effect = {
			country_event = EAI_H.30
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.20
		}
	}
}

#TFV
country_event = {
	id = EAI_H.40
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Canada"

		hidden_effect = {
			CAN = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Australia"

		hidden_effect = {
			AST = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Raj"

		hidden_effect = {
			RAJ = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 2/2"

		hidden_effect = {
			country_event = EAI_H.41
		}
	}
}
country_event = {
	id = EAI_H.41
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "South Africa"

		hidden_effect = {
			SAF = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "New Zealand"

		hidden_effect = {
			NZL = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Page 1/2"

		hidden_effect = {
			country_event = EAI_H.40
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.20
		}
	}
}

#Other
country_event = {
	id = EAI_H.50
	title = "Expert AI: Difficulty Settings > Country Difficulty"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "China"

		hidden_effect = {
			CHI = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Poland"

		hidden_effect = {
			POL = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "Spain"

		hidden_effect = {
			SPR = { save_event_target_as = EAI_difficulty_customisation }
			country_event = EAI_H.1500
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.20
		}
	}
}

#select difficulty
country_event = {
	id = EAI_H.1500
	title = EAI_H.1500.t

	desc = {
		text = "Currently set on 'Insane'. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_idea = EAI_insane_mode NOT = { has_country_flag = EAI_dynamic_difficulty } } }
	}

	desc = {
		text = "Currently set on 'Very Hard'. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_idea = EAI_very_hard_mode NOT = { has_country_flag = EAI_dynamic_difficulty } } }
	}

	desc = {
		text = "Currently set on 'Hard'. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_idea = EAI_hard_mode NOT = { has_country_flag = EAI_dynamic_difficulty } } }
	}

	desc = {
		text = "Country currently has a dynamic difficulty modifier. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_country_flag = EAI_dynamic_difficulty } }
	}

	desc = {
		text = "Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
	}

	picture = GFX_report_event_soviet_tanks_snow
	is_triggered_only = yes

	option = {
		name = "Insane"
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
		event_target:EAI_difficulty_customisation = { set_country_flag = EAI_country_difficulty add_ideas = EAI_insane_mode }
		hidden_effect = { country_event = { id = EAI_H.1501 } }
	}
	option = {
		name = "Very Hard"
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
		event_target:EAI_difficulty_customisation = { set_country_flag = EAI_country_difficulty add_ideas = EAI_very_hard_mode }
		hidden_effect = { country_event = { id = EAI_H.1501 } }
	}
	option = {
		name = "Hard"
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
		event_target:EAI_difficulty_customisation = { set_country_flag = EAI_country_difficulty add_ideas = EAI_hard_mode }
		hidden_effect = { country_event = { id = EAI_H.1501 } }
	}

	option = {
		name = "Disable"
		trigger = { event_target:EAI_difficulty_customisation = { OR = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty } } }
		hidden_effect = {
			event_target:EAI_difficulty_customisation = { clr_country_flag = EAI_country_difficulty clr_country_flag = EAI_dynamic_difficulty remove_ideas = EAI_hard_mode remove_ideas = EAI_very_hard_mode remove_ideas = EAI_insane_mode }
			country_event = { id = EAI_H.1501 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.2 } }
	}
}

country_event = {
	id = EAI_H.1501
	title = EAI_H.1500.t

	desc = {
		text = "Currently set on 'Insane'. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_idea = EAI_insane_mode NOT = { has_country_flag = EAI_dynamic_difficulty } } }
	}

	desc = {
		text = "Currently set on 'Very Hard'. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_idea = EAI_very_hard_mode NOT = { has_country_flag = EAI_dynamic_difficulty } } }
	}

	desc = {
		text = "Currently set on 'Hard'. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_idea = EAI_hard_mode NOT = { has_country_flag = EAI_dynamic_difficulty } } }
	}

	desc = {
		text = "Country currently has a dynamic difficulty modifier. Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { has_country_flag = EAI_dynamic_difficulty } }
	}

	desc = {
		text = "Note: aircraft production costs are raised because this modifier is mostly meant to help the AI keep its divisions equipped."
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
	}

	picture = GFX_report_event_soviet_tanks_snow
	is_triggered_only = yes

	option = {
		name = "Insane"
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
		event_target:EAI_difficulty_customisation = { set_country_flag = EAI_country_difficulty add_ideas = EAI_insane_mode }
		hidden_effect = { country_event = { id = EAI_H.1500 } }
	}
	option = {
		name = "Very Hard"
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
		event_target:EAI_difficulty_customisation = { set_country_flag = EAI_country_difficulty add_ideas = EAI_very_hard_mode }
		hidden_effect = { country_event = { id = EAI_H.1500 } }
	}
	option = {
		name = "Hard"
		trigger = { event_target:EAI_difficulty_customisation = { NOT = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode } } }
		event_target:EAI_difficulty_customisation = { set_country_flag = EAI_country_difficulty add_ideas = EAI_hard_mode }
		hidden_effect = { country_event = { id = EAI_H.1500 } }
	}

	option = {
		name = "Disable"
		trigger = { event_target:EAI_difficulty_customisation = { OR = { has_country_flag = EAI_country_difficulty has_country_flag = EAI_dynamic_difficulty } } }
		hidden_effect = {
			event_target:EAI_difficulty_customisation = { clr_country_flag = EAI_country_difficulty clr_country_flag = EAI_dynamic_difficulty remove_ideas = EAI_hard_mode remove_ideas = EAI_very_hard_mode remove_ideas = EAI_insane_mode }
			country_event = { id = EAI_H.1500 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.2 } }
	}
}

#######################################
#	desperate defense
#######################################

#categories
country_event = {
	id = EAI_H.10000
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a category."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Majors"

		hidden_effect = {
			country_event = EAI_H.10010
		}
	}
	option = {
		name = "Minors"

		hidden_effect = {
			country_event = EAI_H.10020
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.1
		}
	}
}

#majors
country_event = {
	id = EAI_H.10010
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Germany"

		hidden_effect = {
			GER = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Italy"

		hidden_effect = {
			ITA = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Japan"

		hidden_effect = {
			JAP = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 2/3"

		hidden_effect = {
			country_event = EAI_H.10011
		}
	}
}
country_event = {
	id = EAI_H.10011
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "United Kingdom"

		hidden_effect = {
			ENG = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "France"

		hidden_effect = {
			FRA = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "United States"

		hidden_effect = {
			USA = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 3/3"

		hidden_effect = {
			country_event = EAI_H.10012
		}
	}
}
country_event = {
	id = EAI_H.10012
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Soviet Union"

		hidden_effect = {
			SOV = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 1/3"

		hidden_effect = {
			country_event = EAI_H.10010
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.10000
		}
	}
}

#minor categories
country_event = {
	id = EAI_H.10020
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a category."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "'Death Or Dishonor' minors"

		hidden_effect = {
			country_event = EAI_H.10030
		}
	}
	option = {
		name = "'Together For Victory' minors"

		hidden_effect = {
			country_event = EAI_H.10040
		}
	}
	option = {
		name = "Other"

		hidden_effect = {
			country_event = EAI_H.10050
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.10000
		}
	}
}

#DOD
country_event = {
	id = EAI_H.10030
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Romania"

		hidden_effect = {
			ROM = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Hungary"

		hidden_effect = {
			HUN = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Yugoslavia"

		hidden_effect = {
			YUG = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 2/2"

		hidden_effect = {
			country_event = EAI_H.10031
		}
	}
}
country_event = {
	id = EAI_H.10031
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Czechoslovakia"

		hidden_effect = {
			CZE = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 1/2"

		hidden_effect = {
			country_event = EAI_H.10030
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.10020
		}
	}
}

#TFV
country_event = {
	id = EAI_H.10040
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "Canada"

		hidden_effect = {
			CAN = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Australia"

		hidden_effect = {
			AST = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Raj"

		hidden_effect = {
			RAJ = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 2/2"

		hidden_effect = {
			country_event = EAI_H.10041
		}
	}
}
country_event = {
	id = EAI_H.10041
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "South Africa"

		hidden_effect = {
			SAF = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "New Zealand"

		hidden_effect = {
			NZL = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Page 1/2"

		hidden_effect = {
			country_event = EAI_H.10040
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.10020
		}
	}
}

#Other
country_event = {
	id = EAI_H.10050
	title = "Expert AI: Difficulty Settings > Desperate Defense"
	desc = "Select a country."
	picture = GFX_report_event_expert_ai

	is_triggered_only = yes

	option = {
		name = "China"

		hidden_effect = {
			CHI = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Poland"

		hidden_effect = {
			POL = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "Spain"

		hidden_effect = {
			SPR = { save_event_target_as = EAI_dd_customisation }
			country_event = EAI_H.10500
		}
	}
	option = {
		name = "<----"

		hidden_effect = {
			country_event = EAI_H.10020
		}
	}
}

#select difficulty
country_event = {
	id = EAI_H.10500
	title = EAI_H.10500.t

	desc = {
		text = "With this setting the AI starts receiving gradually increasing bonuses to industry and unit training time as its capitulation progress increases."
	}

	picture = GFX_report_event_soviet_tanks_snow
	is_triggered_only = yes

	option = {
		name = "OFF"
		trigger = { event_target:EAI_dd_customisation = { NOT = { has_country_flag = EAI_desperate_defense } } }
		event_target:EAI_dd_customisation = { set_country_flag = EAI_desperate_defense }
		hidden_effect = {
			country_event = { id = EAI_H.10501 }
		}
	}

	option = {
		name = "ON"
		trigger = { event_target:EAI_dd_customisation = { has_country_flag = EAI_desperate_defense } }
		hidden_effect = {
			event_target:EAI_dd_customisation = { clr_country_flag = EAI_desperate_defense country_event = EAI_H.218 }
			country_event = { id = EAI_H.10501 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.10000 } }
	}
}

country_event = {
	id = EAI_H.10501
	title = EAI_H.10500.t

	desc = {
		text = "With this setting the AI starts receiving gradually increasing bonuses to industry and unit training time as its capitulation progress increases."
	}

	picture = GFX_report_event_soviet_tanks_snow
	is_triggered_only = yes

	option = {
		name = "OFF"
		trigger = { event_target:EAI_dd_customisation = { NOT = { has_country_flag = EAI_desperate_defense } } }
		event_target:EAI_dd_customisation = { set_country_flag = EAI_desperate_defense }
		hidden_effect = {
			country_event = { id = EAI_H.10500 }
		}
	}

	option = {
		name = "ON"
		trigger = { event_target:EAI_dd_customisation = { has_country_flag = EAI_desperate_defense } }
		hidden_effect = {
			event_target:EAI_dd_customisation = { clr_country_flag = EAI_desperate_defense country_event = EAI_H.218 }
			country_event = { id = EAI_H.10500 }
		}
	}

	option = {
		name = "<----"
		hidden_effect = { country_event = { id = EAI_H.10000 } }
	}
}

#######################################
#	background events
#######################################

country_event = {
	id = EAI_H.1010
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		has_global_flag = EAI_hard_enemies
		is_ai = yes
		any_enemy_country = { is_ai = no }

		NOT = { has_country_flag = EAI_dynamic_difficulty }
		NOT = { has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode }
	}
	immediate = {
		set_country_flag = EAI_dynamic_difficulty
		add_ideas = EAI_hard_mode
	}
	option = {}
}
country_event = {
	id = EAI_H.1011
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		has_global_flag = EAI_very_hard_enemies
		is_ai = yes
		any_enemy_country = { is_ai = no }

		NOT = { has_country_flag = EAI_dynamic_difficulty }
		NOT = { has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode }
	}
	immediate = {
		set_country_flag = EAI_dynamic_difficulty
		add_ideas = EAI_very_hard_mode
	}
	option = {}
}
country_event = {
	id = EAI_H.1012
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		has_global_flag = EAI_insane_enemies
		is_ai = yes
		any_enemy_country = { is_ai = no }

		NOT = { has_country_flag = EAI_dynamic_difficulty }
		NOT = { has_idea = EAI_hard_mode has_idea = EAI_very_hard_mode has_idea = EAI_insane_mode }
	}
	immediate = {
		set_country_flag = EAI_dynamic_difficulty
		add_ideas = EAI_insane_mode
	}
	option = {}
}
country_event = {
	id = EAI_H.1013
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		NOT = { any_enemy_country = { is_ai = no } }

		has_country_flag = EAI_dynamic_difficulty
	}
	immediate = {
		clr_country_flag = EAI_dynamic_difficulty
		remove_ideas = EAI_hard_mode
		remove_ideas = EAI_very_hard_mode
		remove_ideas = EAI_insane_mode
	}
	option = {}
}

#############

country_event = {
	id = EAI_H.1020
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes

		NOT = {
			has_idea = EAI_attrition_reduction
			has_idea = EAI_attrition_reduction2
			has_idea = EAI_attrition_reduction3
		}

		has_global_flag = EAI_attrition
	}
	immediate = {
		if = { limit = { has_global_flag = EAI_attrition_1 }
			add_ideas = EAI_attrition_reduction
		}
		if = { limit = { has_global_flag = EAI_attrition_2 }
			add_ideas = EAI_attrition_reduction2
		}
		if = { limit = { has_global_flag = EAI_attrition_3 }
			add_ideas = EAI_attrition_reduction3
		}
	}
	option = {}
}

#############

country_event = {
	id = EAI_H.200
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_0 } surrender_progress > 0.05 NOT = { surrender_progress > 0.10 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_0 }
	option = {}
}
country_event = {
	id = EAI_H.201
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_1 } surrender_progress > 0.10 NOT = { surrender_progress > 0.15 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_1 }
	option = {}
}
country_event = {
	id = EAI_H.202
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_2 } surrender_progress > 0.15 NOT = { surrender_progress > 0.20 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_2 }
	option = {}
}
country_event = {
	id = EAI_H.203
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_3 } surrender_progress > 0.20 NOT = { surrender_progress > 0.25 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_3 }
	option = {}
}
country_event = {
	id = EAI_H.204
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_4 } surrender_progress > 0.25 NOT = { surrender_progress > 0.30 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_4 }
	option = {}
}
country_event = {
	id = EAI_H.205
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_5 } surrender_progress > 0.30 NOT = { surrender_progress > 0.35 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_5 }
	option = {}
}
country_event = {
	id = EAI_H.206
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_6 } surrender_progress > 0.35 NOT = { surrender_progress > 0.40 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_6 }
	option = {}
}
country_event = {
	id = EAI_H.207
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_7 } surrender_progress > 0.40 NOT = { surrender_progress > 0.45 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_7 }
	option = {}
}
country_event = {
	id = EAI_H.208
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_8 } surrender_progress > 0.45 NOT = { surrender_progress > 0.50 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_8 }
	option = {}
}
country_event = {
	id = EAI_H.209
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_9 } surrender_progress > 0.50 NOT = { surrender_progress > 0.55 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_9 }
	option = {}
}
country_event = {
	id = EAI_H.210
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_10 } surrender_progress > 0.55 NOT = { surrender_progress > 0.60 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_10 }
	option = {}
}
country_event = {
	id = EAI_H.211
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_11 } surrender_progress > 0.60 NOT = { surrender_progress > 0.65 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_11 }
	option = {}
}
country_event = {
	id = EAI_H.212
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_12 } surrender_progress > 0.65 NOT = { surrender_progress > 0.70 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_12 }
	option = {}
}
country_event = {
	id = EAI_H.213
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_13 } surrender_progress > 0.70 NOT = { surrender_progress > 0.75 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_13 }
	option = {}
}
country_event = {
	id = EAI_H.214
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_14 } surrender_progress > 0.75 NOT = { surrender_progress > 0.80 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_14 }
	option = {}
}
country_event = {
	id = EAI_H.215
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_15 } surrender_progress > 0.80 NOT = { surrender_progress > 0.85 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_15 }
	option = {}
}
country_event = {
	id = EAI_H.216
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_16 } surrender_progress > 0.85 NOT = { surrender_progress > 0.90 } has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_16 }
	option = {}
}
country_event = {
	id = EAI_H.217
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { is_ai = yes OR = { has_country_flag = EAI_desperate_defense AND = { has_global_flag = EAI_global_desperate_defense any_enemy_country = { is_ai = no } } } NOT = { has_idea = EAI_desperate_defense_17 } surrender_progress > 0.90 has_capitulated = no }
	immediate = { clear_desperate_defense = yes add_ideas = EAI_desperate_defense_17 }
	option = {}
}

#
country_event = {
	id = EAI_H.218
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		has_country_flag = EAI_desperate_defense
		OR = {
			has_idea = EAI_desperate_defense_0
			has_idea = EAI_desperate_defense_1
			has_idea = EAI_desperate_defense_2
			has_idea = EAI_desperate_defense_3
			has_idea = EAI_desperate_defense_4
			has_idea = EAI_desperate_defense_5
			has_idea = EAI_desperate_defense_6
			has_idea = EAI_desperate_defense_7
			has_idea = EAI_desperate_defense_8
			has_idea = EAI_desperate_defense_9
			has_idea = EAI_desperate_defense_10
			has_idea = EAI_desperate_defense_11
			has_idea = EAI_desperate_defense_12
			has_idea = EAI_desperate_defense_13
			has_idea = EAI_desperate_defense_14
			has_idea = EAI_desperate_defense_15
			has_idea = EAI_desperate_defense_16
			has_idea = EAI_desperate_defense_17
		}
		OR = {
			NOT = { surrender_progress > 0.05 }
			has_capitulated = yes
		}
	}
	immediate = { clear_desperate_defense = yes }
	option = {}
}

#
country_event = {
	id = EAI_H.220
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		has_global_flag = EAI_global_desperate_defense
		NOT = { has_country_flag = EAI_desperate_defense }
		OR = {
			has_idea = EAI_desperate_defense_0
			has_idea = EAI_desperate_defense_1
			has_idea = EAI_desperate_defense_2
			has_idea = EAI_desperate_defense_3
			has_idea = EAI_desperate_defense_4
			has_idea = EAI_desperate_defense_5
			has_idea = EAI_desperate_defense_6
			has_idea = EAI_desperate_defense_7
			has_idea = EAI_desperate_defense_8
			has_idea = EAI_desperate_defense_9
			has_idea = EAI_desperate_defense_10
			has_idea = EAI_desperate_defense_11
			has_idea = EAI_desperate_defense_12
			has_idea = EAI_desperate_defense_13
			has_idea = EAI_desperate_defense_14
			has_idea = EAI_desperate_defense_15
			has_idea = EAI_desperate_defense_16
			has_idea = EAI_desperate_defense_17
		}
		OR = {
			NOT = { surrender_progress > 0.05 }
			has_capitulated = yes
			NOT = { any_enemy_country = { is_ai = no } }
		}
	}
	immediate = { clear_desperate_defense = yes }
	option = {}
}